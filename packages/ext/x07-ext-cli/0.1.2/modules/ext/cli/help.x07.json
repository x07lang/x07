{"decls":[{"kind":"export","names":["ext.cli.help.render"]},{"body":["begin",["let","n_in",["bytes.len","spec_json_or_specbin"]],["let","is_doc",["if",["<u","n_in",1],0,["if",["=",["bytes.get_u8","spec_json_or_specbin",0],1],1,0]]],["let","specbin",["if",["=","is_doc",1],"spec_json_or_specbin",["begin",["let","compiled",["ext.cli.specrows.compile","spec_json_or_specbin"]],["result_bytes.unwrap_or","compiled",["bytes.alloc",0]]]]],["if",["=",["bytes.len","specbin"],0],["return",["bytes.lit","invalid_spec"]],0],["let","docv",["bytes.view","specbin"]],["if",["=",["view.get_u8","docv",0],1],0,["return",["bytes.lit","invalid_specbin"]]],["let","root_off",["ext.data_model.root_offset","docv"]],["let","app_key",["bytes.lit","app"]],["let","name_key",["bytes.lit","name"]],["let","rows_key",["bytes.lit","rows"]],["let","app_off",["ext.data_model.map_find","docv","root_off",["bytes.view","app_key"]]],["let","app_name",["if",["<","app_off",0],["bytes.lit","app"],["begin",["let","name_off",["ext.data_model.map_find","docv","app_off",["bytes.view","name_key"]]],["if",["<","name_off",0],["bytes.lit","app"],["ext.data_model.string_get","docv","name_off"]]]]],["let","rows_off",["ext.data_model.map_find","docv","root_off",["bytes.view","rows_key"]]],["if",["<","rows_off",0],["return",["bytes.lit","missing_rows"]],0],["let","count",["ext.data_model.seq_len","docv","rows_off"]],["if",["<","count",0],["return",["bytes.lit","invalid_spec"]],0],["let","has_opts",0],["let","arg_part",["vec_u8.with_capacity",0]],["let","root",["bytes.lit","root"]],["for","i",0,"count",["begin",["let","row_off",["ext.data_model.seq_get","docv","rows_off","i"]],["let","scope_off",["ext.data_model.seq_get","docv","row_off",0]],["let","scope",["ext.data_model.string_get","docv","scope_off"]],["if",["bytes.eq","scope","root"],["begin",["let","kind_off",["ext.data_model.seq_get","docv","row_off",1]],["let","kind",["ext.data_model.string_get","docv","kind_off"]],["if",["bytes.eq","kind",["bytes.lit","arg"]],["begin",["let","pos_off",["ext.data_model.seq_get","docv","row_off",2]],["let","pos",["ext.data_model.string_get","docv","pos_off"]],["set","arg_part",["vec_u8.push","arg_part",32]],["set","arg_part",["vec_u8.push","arg_part",60]],["set","arg_part",["vec_u8.extend_bytes","arg_part","pos"]],["set","arg_part",["vec_u8.push","arg_part",62]],0],["if",["bytes.eq","kind",["bytes.lit","flag"]],["set","has_opts",1],["if",["bytes.eq","kind",["bytes.lit","opt"]],["set","has_opts",1],["if",["bytes.eq","kind",["bytes.lit","help"]],["set","has_opts",1],["if",["bytes.eq","kind",["bytes.lit","version"]],["set","has_opts",1],0]]]]],0],0],0]],["let","out",["vec_u8.with_capacity",64]],["set","out",["vec_u8.extend_bytes","out",["bytes.lit","usage:"]]],["set","out",["vec_u8.push","out",32]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","app_name"]]],["if",["=","has_opts",1],["begin",["set","out",["vec_u8.push","out",32]],["set","out",["vec_u8.extend_bytes","out",["bytes.lit","[OPTIONS]"]]],0],0],["set","out",["vec_u8.extend_bytes","out",["vec_u8.as_view","arg_part"]]],["set","out",["vec_u8.push","out",10]],["std.vec.as_bytes","out"]],"kind":"defn","name":"ext.cli.help.render","params":[{"name":"spec_json_or_specbin","ty":"bytes"}],"result":"bytes"}],"imports":["ext.cli.specrows","ext.data_model","std.vec"],"kind":"module","module_id":"ext.cli.help","schema_version":"x07.x07ast@0.2.0"}
