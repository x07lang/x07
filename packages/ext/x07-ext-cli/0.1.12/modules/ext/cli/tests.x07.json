{"decls":[{"kind":"export","names":["ext.cli.tests.test_dashdash_delimiter","ext.cli.tests.test_implied_help_flag","ext.cli.tests.test_long_opt_equals","ext.cli.tests.test_long_opt_next_token","ext.cli.tests.test_missing_required_arg","ext.cli.tests.test_missing_required_opt","ext.cli.tests.test_short_bundle_flags","ext.cli.tests.test_subcmd_opt_after_subcmd"]},{"body":["begin",["let","tokv",["bytes.view","tok"]],["let","n",["view.len","tokv"]],["set","v",["vec_u8.extend_bytes","v",["codec.write_u32_le","n"]]],["set","v",["vec_u8.extend_bytes","v","tokv"]],"v"],"kind":"defn","name":"ext.cli.tests._argv_push","params":[{"name":"v","ty":"vec_u8"},{"name":"tok","ty":"bytes"}],"result":"vec_u8"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"flag\",\"-v\",\"--verbose\",\"verbose\",\"v\"],[\"root\",\"arg\",\"INPUT\",\"input\",\"i\",{\"required\":true}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",4]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","-v"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","-x"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",80]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","root"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",2]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",5]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","input"]]],["set","exp",["vec_u8.push","exp",3]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",2]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","-x"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",7]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","verbose"]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.push","exp",1]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_dashdash_delimiter","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"flag\",\"-v\",\"--verbose\",\"verbose\",\"v\"],[\"root\",\"arg\",\"INPUT\",\"input\",\"i\",{\"required\":true}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",2]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--help"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",64]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","root"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","help"]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.push","exp",1]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_implied_help_flag","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"opt\",\"-o\",\"--output\",\"output\",\"PATH\",\"o\",{}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",2]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--output=x.txt"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",80]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","root"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",6]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","output"]]],["set","exp",["vec_u8.push","exp",2]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",5]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","x.txt"]]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_long_opt_equals","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"opt\",\"-o\",\"--output\",\"output\",\"PATH\",\"o\",{}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",3]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--output"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","x.txt"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",80]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","root"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",6]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","output"]]],["set","exp",["vec_u8.push","exp",2]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",5]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","x.txt"]]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_long_opt_next_token","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"arg\",\"INPUT\",\"input\",\"i\",{\"required\":true}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",1]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["try",["std.test.assert_i32_eq",["ext.cli.is_ok",["bytes.view","got"]],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.cli.err_code",["bytes.view","got"]],1002,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.cli.err_msg",["bytes.view","got"]],["bytes.lit","missing_required_arg"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_true",[">",["bytes.len",["ext.cli.err_usage",["bytes.view","got"]]],0],["std.test.code_assert_true"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_missing_required_arg","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"opt\",\"-o\",\"--output\",\"output\",\"PATH\",\"o\",{\"required\":true}]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",1]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["try",["std.test.assert_i32_eq",["ext.cli.is_ok",["bytes.view","got"]],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.cli.err_code",["bytes.view","got"]],1002,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.cli.err_msg",["bytes.view","got"]],["bytes.lit","missing_required_opt"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_missing_required_opt","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"flag\",\"-a\",\"--a\",\"a\",\"a\"],[\"root\",\"flag\",\"-b\",\"--b\",\"b\",\"b\"],[\"root\",\"flag\",\"-c\",\"--c\",\"c\",\"c\"]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",2]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","-abc"]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",120]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","root"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",3]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","a"]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","b"]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","c"]]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.push","exp",1]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_short_bundle_flags","params":[],"result":"result_i32"},{"body":["begin",["let","spec",["bytes.lit","{\"schema_version\":\"x07cli.specrows@0.1.0\",\"app\":{\"name\":\"demo\",\"version\":\"0.1.0\"},\"rows\":[[\"root\",\"about\",\"Demo\"],[\"scaffold\",\"about\",\"Scaffolding.\"],[\"scaffold\",\"arg\",\"SUBCMD\",\"subcmd\",\"Scaffold subcommand.\",{ \"required\":true }],[\"scaffold\",\"opt\",\"\",\"--template\",\"template\",\"STR\",\"Template.\",{ \"required\":true }],[\"scaffold\",\"opt\",\"\",\"--dir\",\"dir\",\"PATH\",\"Dir.\",{ \"required\":true }]]}"]],["let","argv",["vec_u8.with_capacity",0]],["set","argv",["vec_u8.extend_bytes","argv",["codec.write_u32_le",7]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","demo"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","scaffold"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","init"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--template"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","mcp-server"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","--dir"]]],["set","argv",["ext.cli.tests._argv_push","argv",["bytes.lit","."]]],["let","argv_v1",["vec_u8.into_bytes","argv"]],["let","got",["ext.cli.parse_specrows","spec","argv_v1"]],["let","exp",["vec_u8.with_capacity",128]],["set","exp",["vec_u8.push","exp",1]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",8]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","scaffold"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",3]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",3]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","dir"]]],["set","exp",["vec_u8.push","exp",2]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",1]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","."]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",6]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","subcmd"]]],["set","exp",["vec_u8.push","exp",3]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",4]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","init"]]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",8]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","template"]]],["set","exp",["vec_u8.push","exp",2]],["set","exp",["vec_u8.extend_bytes","exp",["codec.write_u32_le",10]]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","mcp-server"]]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.cli.tests.test_subcmd_opt_after_subcmd","params":[],"result":"result_i32"}],"imports":["ext.cli","std.test"],"kind":"module","module_id":"ext.cli.tests","schema_version":"x07.x07ast@0.3.0"}
