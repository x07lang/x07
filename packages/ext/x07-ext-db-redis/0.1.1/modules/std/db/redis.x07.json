{"decls":[{"kind":"export","names":["std.db.redis._not_implemented_note_v1","std.db.redis.caps_default_v1","std.db.redis.close_v1","std.db.redis.cmd_doc_v1","std.db.redis.cmd_v1","std.db.redis.open_tcp_v1","std.db.redis.open_unix_v1","std.db.redis.open_v1"]},{"body":["bytes.lit","std.db.redis_not_implemented_v0.1.0"],"kind":"defn","name":"std.db.redis._not_implemented_note_v1","params":[],"result":"bytes"},{"body":["std.db.redis.spec.caps_default_v1"],"kind":"defn","name":"std.db.redis.caps_default_v1","params":[],"result":"bytes"},{"body":["begin",["let","raw",["std.db.spec.conn_raw_v1","conn"]],["let","req",["std.db.redis.spec.close_req_v1","raw",["std.db.redis.spec.flags_none_v1"]]],["let","caps_b",["view.to_bytes","caps"]],["os.db.redis.close_v1","req","caps_b"]],"kind":"defn","name":"std.db.redis.close_v1","params":[{"name":"conn","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["=",["std.db.spec.resp_is_ok_v1","resp"],1],["std.db.spec.resp_ok_payload_v1","resp"],["ext.data_model.doc_err_from_code",["std.db.spec.resp_err_code_v1","resp"]]]],"kind":"defn","name":"std.db.redis.cmd_doc_v1","params":[{"name":"resp","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","raw",["std.db.spec.conn_raw_v1","conn"]],["let","req",["std.db.redis.spec.cmd_req_v1","raw","argv","flags"]],["let","caps_b",["view.to_bytes","caps"]],["os.db.redis.cmd_v1","req","caps_b"]],"kind":"defn","name":"std.db.redis.cmd_v1","params":[{"name":"conn","ty":"i32"},{"name":"argv","ty":"bytes"},{"name":"flags","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","req",["std.db.redis.spec.open_req_tcp_v1","host","port","user","pass","db",["std.db.redis.spec.flags_none_v1"]]],["std.db.redis.open_v1","req","caps"]],"kind":"defn","name":"std.db.redis.open_tcp_v1","params":[{"name":"host","ty":"bytes"},{"name":"port","ty":"i32"},{"name":"user","ty":"bytes"},{"name":"pass","ty":"bytes"},{"name":"db","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","req",["std.db.redis.spec.open_req_unix_v1","path","user","pass","db",["std.db.redis.spec.flags_none_v1"]]],["std.db.redis.open_v1","req","caps"]],"kind":"defn","name":"std.db.redis.open_unix_v1","params":[{"name":"path","ty":"bytes"},{"name":"user","ty":"bytes"},{"name":"pass","ty":"bytes"},{"name":"db","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","caps_b",["view.to_bytes","caps"]],["let","resp",["os.db.redis.open_v1","req","caps_b"]],["if",["=",["std.db.spec.resp_is_ok_v1","resp"],1],["begin",["let","pl",["std.db.spec.resp_ok_payload_v1","resp"]],["let","raw",["codec.read_u32_le","pl",0]],["let","conn",["std.db.spec.conn_pack_v1",["std.db.spec.driver_redis_v1"],"raw"]],["std.db.spec.resp_ok_v1",["std.db.spec.op_open_v1"],["codec.write_u32_le","conn"]]],"resp"]],"kind":"defn","name":"std.db.redis.open_v1","params":[{"name":"req","ty":"bytes"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.data_model","std.codec","std.db.redis.spec","std.db.spec"],"kind":"module","module_id":"std.db.redis","schema_version":"x07.x07ast@0.2.0"}
