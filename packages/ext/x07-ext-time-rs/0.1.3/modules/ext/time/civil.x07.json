{"decls":[{"kind":"export","names":["ext.time.civil.code_before_epoch","ext.time.civil.code_invalid_doc","ext.time.civil.code_invalid_param","ext.time.civil.code_out_of_range","ext.time.civil.day_i32","ext.time.civil.err_code","ext.time.civil.from_ts_v1","ext.time.civil.from_unix_s_v1","ext.time.civil.hour_i32","ext.time.civil.is_err","ext.time.civil.is_ok","ext.time.civil.make_v1","ext.time.civil.minute_i32","ext.time.civil.month_i32","ext.time.civil.nanos_u32","ext.time.civil.offset_s","ext.time.civil.second_i32","ext.time.civil.to_ts_v1","ext.time.civil.unix_s_hi_u32","ext.time.civil.unix_s_lo_u32","ext.time.civil.ver","ext.time.civil.weekday_iso_v1","ext.time.civil.year_i32"]},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.time.civil._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":4,"kind":"defn","name":"ext.time.civil.code_before_epoch","params":[],"result":"i32"},{"body":1,"kind":"defn","name":"ext.time.civil.code_invalid_doc","params":[],"result":"i32"},{"body":2,"kind":"defn","name":"ext.time.civil.code_invalid_param","params":[],"result":"i32"},{"body":3,"kind":"defn","name":"ext.time.civil.code_out_of_range","params":[],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],13],0,["codec.read_u32_le","v",9]],0],"kind":"defn","name":"ext.time.civil.day_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_err","v"],["if",["<u",["view.len","v"],5],0,["codec.read_u32_le","v",1]],0],"kind":"defn","name":"ext.time.civil.err_code","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.rfc3339.is_err","ts"],["ext.time.civil._make_err",["ext.time.civil.code_invalid_doc"]],["begin",["let","unix_lo",["ext.time.rfc3339.unix_s_u32","ts"]],["let","unix_hi",["ext.time.rfc3339.unix_s_i64_hi","ts"]],["let","offset_s",["ext.time.rfc3339.offset_s","ts"]],["let","nanos",["ext.time.rfc3339.nanos_u32","ts"]],["ext.time.civil.from_unix_s_v1","unix_lo","unix_hi","offset_s","nanos"]]],"kind":"defn","name":"ext.time.civil.from_ts_v1","params":[{"name":"ts","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<","nanos",0],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",[">=u","nanos",1000000000],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["let","off_abs",["if",["<","offset_s",0],["-",0,"offset_s"],"offset_s"]],["if",["<u",86400,"off_abs"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["let","local_lo","unix_lo"],["let","local_hi","unix_hi"],["if",["<","offset_s",0],["begin",["let","off","off_abs"],["if",["*",["=","unix_hi",0],["<u","unix_lo","off"]],["return",["ext.time.civil._make_err",["ext.time.civil.code_before_epoch"]]],0],["set","local_lo",["ext.time.rfc3339._u64_sub_lo","unix_lo","off"]],["set","local_hi",["ext.time.rfc3339._u64_sub_hi","unix_lo","unix_hi","off",0,"local_lo"]],0],["begin",["let","off","off_abs"],["set","local_lo",["ext.time.rfc3339._u64_add_lo","unix_lo","off"]],["set","local_hi",["ext.time.rfc3339._u64_add_hi","unix_lo","unix_hi","off",0,"local_lo"]],0]],["let","dm",["ext.time.rfc3339._u64_div_mod_u32_small","local_lo","local_hi",86400]],["if",["=",["bytes.get_u8","dm",0],0],["return",["ext.time.civil._make_err",["ext.time.civil.code_out_of_range"]]],0],["let","days_lo",["codec.read_u32_le","dm",1]],["let","days_hi",["codec.read_u32_le","dm",5]],["let","rem_s",["codec.read_u32_le","dm",9]],["if",["=","days_hi",0],0,["return",["ext.time.civil._make_err",["ext.time.civil.code_out_of_range"]]]],["let","hour",0],["let","rem","rem_s"],["for","i",0,24,["if",["<u","rem",3600],["begin",["set","i",24],0],["begin",["set","rem",["-","rem",3600]],["set","hour",["+","hour",1]],0]]],["let","minute",0],["for","i",0,60,["if",["<u","rem",60],["begin",["set","i",60],0],["begin",["set","rem",["-","rem",60]],["set","minute",["+","minute",1]],0]]],["let","second","rem"],["let","year",1970],["let","day_rem","days_lo"],["for","i",0,10000,["begin",["let","diy",["if",["ext.time.rfc3339._is_leap_year","year"],366,365]],["if",["<u","day_rem","diy"],["begin",["set","i",10000],0],["begin",["set","day_rem",["-","day_rem","diy"]],["set","year",["+","year",1]],0]]]],["if",["<u",9999,"year"],["return",["ext.time.civil._make_err",["ext.time.civil.code_out_of_range"]]],0],["let","month",1],["for","i",0,12,["begin",["let","dim",["ext.time.rfc3339._days_in_month","year","month"]],["if",["<u","day_rem","dim"],["begin",["set","i",12],0],["begin",["set","day_rem",["-","day_rem","dim"]],["set","month",["+","month",1]],0]]]],["let","day",["+","day_rem",1]],["let","out",["vec_u8.with_capacity",41]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","year"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","month"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","day"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hour"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","minute"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","second"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","nanos"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","offset_s"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_lo"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_hi"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.time.civil.from_unix_s_v1","params":[{"name":"unix_lo","ty":"i32"},{"name":"unix_hi","ty":"i32"},{"name":"offset_s","ty":"i32"},{"name":"nanos","ty":"i32"}],"result":"bytes"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],17],0,["codec.read_u32_le","v",13]],0],"kind":"defn","name":"ext.time.civil.hour_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["<u",["view.len","v"],1],1,["=",["view.get_u8","v",0],0]],"kind":"defn","name":"ext.time.civil.is_err","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["<u",["view.len","v"],1],0,["=",["view.get_u8","v",0],1]],"kind":"defn","name":"ext.time.civil.is_ok","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<","year",1970],["return",["ext.time.civil._make_err",["ext.time.civil.code_out_of_range"]]],0],["if",["<","month",1],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<u",12,"month"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["let","dim",["ext.time.rfc3339._days_in_month","year","month"]],["if",["<","day",1],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<u","dim","day"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<","hour",0],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<u",23,"hour"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<","minute",0],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<u",59,"minute"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<","second",0],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<u",59,"second"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",["<","nanos",0],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["if",[">=u","nanos",1000000000],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["let","off_abs",["if",["<","offset_s",0],["-",0,"offset_s"],"offset_s"]],["if",["<u",86400,"off_abs"],["return",["ext.time.civil._make_err",["ext.time.civil.code_invalid_param"]]],0],["let","days",["ext.time.rfc3339._days_since_epoch_1970","year","month","day"]],["let","local_lo",["ext.time.rfc3339._u64_mul_u32_lo","days",0,86400]],["let","local_hi",["ext.time.rfc3339._u64_mul_u32_hi","days",0,86400]],["let","sod",["+",["+",["*","hour",3600],["*","minute",60]],"second"]],["let","local2_lo",["ext.time.rfc3339._u64_add_lo","local_lo","sod"]],["let","local2_hi",["ext.time.rfc3339._u64_add_hi","local_lo","local_hi","sod",0,"local2_lo"]],["let","unix_lo",0],["let","unix_hi",0],["if",["<","offset_s",0],["begin",["let","off","off_abs"],["set","unix_lo",["ext.time.rfc3339._u64_add_lo","local2_lo","off"]],["set","unix_hi",["ext.time.rfc3339._u64_add_hi","local2_lo","local2_hi","off",0,"unix_lo"]],0],["begin",["let","off","off_abs"],["if",["*",["=","local2_hi",0],["<u","local2_lo","off"]],["return",["ext.time.civil._make_err",["ext.time.civil.code_before_epoch"]]],0],["set","unix_lo",["ext.time.rfc3339._u64_sub_lo","local2_lo","off"]],["set","unix_hi",["ext.time.rfc3339._u64_sub_hi","local2_lo","local2_hi","off",0,"unix_lo"]],0]],["let","out",["vec_u8.with_capacity",41]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","year"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","month"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","day"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hour"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","minute"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","second"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","nanos"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","offset_s"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_lo"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_hi"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.time.civil.make_v1","params":[{"name":"year","ty":"i32"},{"name":"month","ty":"i32"},{"name":"day","ty":"i32"},{"name":"hour","ty":"i32"},{"name":"minute","ty":"i32"},{"name":"second","ty":"i32"},{"name":"nanos","ty":"i32"},{"name":"offset_s","ty":"i32"}],"result":"bytes"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],21],0,["codec.read_u32_le","v",17]],0],"kind":"defn","name":"ext.time.civil.minute_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],9],0,["codec.read_u32_le","v",5]],0],"kind":"defn","name":"ext.time.civil.month_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],29],0,["codec.read_u32_le","v",25]],0],"kind":"defn","name":"ext.time.civil.nanos_u32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],33],0,["codec.read_u32_le","v",29]],0],"kind":"defn","name":"ext.time.civil.offset_s","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],25],0,["codec.read_u32_le","v",21]],0],"kind":"defn","name":"ext.time.civil.second_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_err","civ"],["begin",["let","code",["ext.time.civil.err_code","civ"]],["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],["begin",["let","unix_lo",["ext.time.civil.unix_s_lo_u32","civ"]],["let","unix_hi",["ext.time.civil.unix_s_hi_u32","civ"]],["let","offset_s",["ext.time.civil.offset_s","civ"]],["let","nanos",["ext.time.civil.nanos_u32","civ"]],["let","out",["vec_u8.with_capacity",21]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_lo"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","offset_s"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","nanos"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","unix_hi"]]],["vec_u8.into_bytes","out"]]],"kind":"defn","name":"ext.time.civil.to_ts_v1","params":[{"name":"civ","ty":"bytes_view"}],"result":"bytes"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],41],0,["codec.read_u32_le","v",37]],0],"kind":"defn","name":"ext.time.civil.unix_s_hi_u32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],37],0,["codec.read_u32_le","v",33]],0],"kind":"defn","name":"ext.time.civil.unix_s_lo_u32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":1,"kind":"defn","name":"ext.time.civil.ver","params":[],"result":"i32"},{"body":["if",["ext.time.civil.is_err","v"],0,["begin",["let","days",["ext.time.rfc3339._days_since_epoch_1970",["ext.time.civil.year_i32","v"],["ext.time.civil.month_i32","v"],["ext.time.civil.day_i32","v"]]],["let","t",["+","days",3]],["let","dm",["ext.time.rfc3339._u64_div_mod_u32_small","t",0,7]],["if",["=",["bytes.get_u8","dm",0],0],0,["+",["codec.read_u32_le","dm",9],1]]]],"kind":"defn","name":"ext.time.civil.weekday_iso_v1","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"},{"body":["if",["ext.time.civil.is_ok","v"],["if",["<u",["view.len","v"],5],0,["codec.read_u32_le","v",1]],0],"kind":"defn","name":"ext.time.civil.year_i32","params":[{"name":"v","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.time.rfc3339"],"kind":"module","module_id":"ext.time.civil","schema_version":"x07.x07ast@0.2.0"}
