{"decls":[{"kind":"export","names":["std.crawl.robots.allowed_v1","std.crawl.robots.parse_v1"]},{"body":["begin",["let","colon",["std.bytes.find_u8","line",58]],["if",["<","colon",0],["std.vec.extend_bytes","out","line"],["begin",["let","prefix_len",["+","colon",1]],["let","n",["view.len","line"]],["let","start",["std.crawl.robots._skip_space_tab_v1","line","prefix_len"]],["set","out",["std.vec.extend_bytes","out",["view.slice","line",0,"prefix_len"]]],["set","out",["std.vec.extend_bytes","out",["view.slice","line","start",["-","n","start"]]]],"out"]]],"kind":"defn","name":"std.crawl.robots._append_line_canon_v1","params":[{"name":"line","ty":"bytes_view"},{"name":"out","ty":"vec_u8"}],"result":"vec_u8"},{"body":["begin",["let","n",["view.len","b"]],["for","i","start","n",["begin",["let","c",["view.get_u8","b","i"]],["if",["std.text.ascii.is_space_tab","c"],0,["return","i"]]]],"n"],"kind":"defn","name":"std.crawl.robots._skip_space_tab_v1","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","prefix_b",["bytes.lit","http://x"]],["let","prefix",["bytes.view","prefix_b"]],["let","n",["+",["view.len","prefix"],["view.len","url_path"]]],["let","v",["std.vec.with_capacity","n"]],["set","v",["std.vec.extend_bytes","v","prefix"]],["set","v",["std.vec.extend_bytes","v","url_path"]],["let","url",["vec_u8.into_bytes","v"]],["ext.robots.allowed_v1","rules","user_agent",["bytes.view","url"]]],"kind":"defn","name":"std.crawl.robots.allowed_v1","params":[{"name":"rules","ty":"bytes_view"},{"name":"user_agent","ty":"bytes_view"},{"name":"url_path","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","norm",["std.text.ascii.normalize_lines","robots_txt"]],["let","normv",["bytes.view","norm"]],["let","sl",["std.text.ascii.split_lines_view","normv"]],["let","slv",["bytes.view","sl"]],["let","count",["std.text.slices.count_v1","slv"]],["let","out",["std.vec.with_capacity",["bytes.len","norm"]]],["for","i",0,"count",["begin",["let","line",["std.text.slices.view_at_v1","normv","slv","i"]],["if",[">",["vec_u8.len","out"],0],["set","out",["std.vec.push","out",10]],0],["set","out",["std.crawl.robots._append_line_canon_v1","line","out"]],0]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.crawl.robots.parse_v1","params":[{"name":"robots_txt","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.robots","std.bytes","std.text.ascii","std.text.slices","std.vec"],"kind":"module","module_id":"std.crawl.robots","schema_version":"x07.x07ast@0.3.0"}
