{"decls":[{"kind":"export","names":["ext.semver.semver_build","ext.semver.semver_cmp_str","ext.semver.semver_err_code","ext.semver.semver_is_err","ext.semver.semver_major","ext.semver.semver_minor","ext.semver.semver_parse","ext.semver.semver_patch","ext.semver.semver_prerelease"]},{"body":["begin",["let","a_len",["-","a_end","a_start"]],["let","b_len",["-","b_end","b_start"]],["let","min_len",["if",["<","a_len","b_len"],"a_len","b_len"]],["for","i",0,"min_len",["begin",["let","ac",["view.get_u8","a",["+","a_start","i"]]],["let","bc",["view.get_u8","b",["+","b_start","i"]]],["if",["<","ac","bc"],["return",["-",0,1]],0],["if",[">","ac","bc"],["return",1],0]]],["if",["<","a_len","b_len"],["-",0,1],["if",[">","a_len","b_len"],1,0]]],"kind":"defn","name":"ext.semver._cmp_bytes","params":[{"name":"a","ty":"bytes_view"},{"name":"a_start","ty":"i32"},{"name":"a_end","ty":"i32"},{"name":"b","ty":"bytes_view"},{"name":"b_start","ty":"i32"},{"name":"b_end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","a_major",["codec.read_u32_le","a_doc",1]],["let","b_major",["codec.read_u32_le","b_doc",1]],["if",["<","a_major","b_major"],["return",["-",0,1]],0],["if",[">","a_major","b_major"],["return",1],0],["let","a_minor",["codec.read_u32_le","a_doc",5]],["let","b_minor",["codec.read_u32_le","b_doc",5]],["if",["<","a_minor","b_minor"],["return",["-",0,1]],0],["if",[">","a_minor","b_minor"],["return",1],0],["let","a_patch",["codec.read_u32_le","a_doc",9]],["let","b_patch",["codec.read_u32_le","b_doc",9]],["if",["<","a_patch","b_patch"],["return",["-",0,1]],0],["if",[">","a_patch","b_patch"],["return",1],0],["let","a_pre_len",["codec.read_u32_le","a_doc",13]],["let","b_pre_len",["codec.read_u32_le","b_doc",13]],["if",["=","a_pre_len",0],["begin",["if",["=","b_pre_len",0],["return",0],0],["return",1]],0],["if",["=","b_pre_len",0],["return",["-",0,1]],0],["let","a_pre",["view.slice","a_doc",17,"a_pre_len"]],["let","b_pre",["view.slice","b_doc",17,"b_pre_len"]],["ext.semver._cmp_prerelease","a_pre","b_pre"]],"kind":"defn","name":"ext.semver._cmp_docs","params":[{"name":"a_doc","ty":"bytes_view"},{"name":"b_doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","a_num",["ext.semver._is_numeric_ident","a","a_start","a_end"]],["let","b_num",["ext.semver._is_numeric_ident","b","b_start","b_end"]],["if",["if",["=","a_num",1],["=","b_num",1],0],["begin",["let","a_len",["-","a_end","a_start"]],["let","b_len",["-","b_end","b_start"]],["if",["<","a_len","b_len"],["return",["-",0,1]],0],["if",[">","a_len","b_len"],["return",1],0],["return",["ext.semver._cmp_bytes","a","a_start","a_end","b","b_start","b_end"]]],0],["if",["if",["=","a_num",1],["=","b_num",0],0],["return",["-",0,1]],0],["if",["if",["=","a_num",0],["=","b_num",1],0],["return",1],0],["ext.semver._cmp_bytes","a","a_start","a_end","b","b_start","b_end"]],"kind":"defn","name":"ext.semver._cmp_ident","params":[{"name":"a","ty":"bytes_view"},{"name":"a_start","ty":"i32"},{"name":"a_end","ty":"i32"},{"name":"b","ty":"bytes_view"},{"name":"b_start","ty":"i32"},{"name":"b_end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","a_len",["view.len","a"]],["let","b_len",["view.len","b"]],["let","a_pos",0],["let","b_pos",0],["for","_",0,["+",["+","a_len","b_len"],2],["begin",["if",[">=u","a_pos","a_len"],["begin",["if",[">=u","b_pos","b_len"],["return",0],0],["return",["-",0,1]]],0],["if",[">=u","b_pos","b_len"],["return",1],0],["let","a_dot",["ext.semver._find_dot_or_end","a","a_pos"]],["let","b_dot",["ext.semver._find_dot_or_end","b","b_pos"]],["let","cmp",["ext.semver._cmp_ident","a","a_pos","a_dot","b","b_pos","b_dot"]],["if",["=",["=","cmp",0],0],["return","cmp"],0],["set","a_pos",["if",["<u","a_dot","a_len"],["+","a_dot",1],"a_dot"]],["set","b_pos",["if",["<u","b_dot","b_len"],["+","b_dot",1],"b_dot"]]]],0],"kind":"defn","name":"ext.semver._cmp_prerelease","params":[{"name":"a","ty":"bytes_view"},{"name":"b","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["for","i","start","n",["if",["=",["view.get_u8","b","i"],46],["return","i"],0]],"n"],"kind":"defn","name":"ext.semver._find_dot_or_end","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["for","i","start","n",["begin",["let","c",["view.get_u8","b","i"]],["if",["if",["=","c",45],1,["=","c",43]],["return","i"],0],["if",["=",["ext.semver._is_digit","c"],0],["return",["-",0,1]],0]]],"n"],"kind":"defn","name":"ext.semver._find_end_of_patch","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["for","i","start","n",["if",["=",["view.get_u8","b","i"],43],["return","i"],0]],"n"],"kind":"defn","name":"ext.semver._find_plus_or_end","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["if",[">=u","c",65],["if",["<u","c",91],["return",1],0],0],["if",[">=u","c",97],["if",["<u","c",123],["return",1],0],0],0],"kind":"defn","name":"ext.semver._is_alpha","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["if",[">=u","c",48],["if",["<u","c",58],["return",1],0],0],0],"kind":"defn","name":"ext.semver._is_digit","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["ext.semver._is_digit","c"],["return",1],0],["if",["ext.semver._is_alpha","c"],["return",1],0],["=","c",45]],"kind":"defn","name":"ext.semver._is_ident_char","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["<=","end","start"],["return",0],0],["for","i","start","end",["if",["=",["ext.semver._is_digit",["view.get_u8","b","i"]],0],["return",0],0]],1],"kind":"defn","name":"ext.semver._is_numeric_ident","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.semver._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<=","end","start"],["return",["-",0,1]],0],["let","len",["-","end","start"]],["if",[">","len",1],["if",["=",["view.get_u8","b","start"],48],["return",["-",0,1]],0],0],["let","val",0],["for","i","start","end",["begin",["let","c",["view.get_u8","b","i"]],["if",["=",["ext.semver._is_digit","c"],0],["return",["-",0,1]],0],["let","digit",["-","c",48]],["if",[">","val",214748364],["return",["-",0,1]],0],["if",["=","val",214748364],["if",[">","digit",7],["return",["-",0,1]],0],0],["set","val",["+",["*","val",10],"digit"]]]],"val"],"kind":"defn","name":"ext.semver._parse_u31","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["<=","end","start"],["return",0],0],["let","seg_start","start"],["for","i","start","end",["if",["=",["view.get_u8","b","i"],46],["begin",["if",["=",["ext.semver._validate_ident","b","seg_start","i","disallow_leading_zeros_numeric"],0],["return",0],0],["set","seg_start",["+","i",1]]],0]],["if",["=",["ext.semver._validate_ident","b","seg_start","end","disallow_leading_zeros_numeric"],0],["return",0],0],1],"kind":"defn","name":"ext.semver._validate_dot_separated","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"},{"name":"disallow_leading_zeros_numeric","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["<=","end","start"],["return",0],0],["let","is_numeric",1],["for","i","start","end",["begin",["let","c",["view.get_u8","b","i"]],["if",["=",["ext.semver._is_ident_char","c"],0],["return",0],0],["if",["=",["ext.semver._is_digit","c"],0],["set","is_numeric",0],0]]],["if",["if",["=","disallow_leading_zeros_numeric",1],["=","is_numeric",1],0],["if",[">",["-","end","start"],1],["if",["=",["view.get_u8","b","start"],48],["return",0],0],0],0],1],"kind":"defn","name":"ext.semver._validate_ident","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"},{"name":"disallow_leading_zeros_numeric","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",21],["return",["bytes.alloc",0]],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",["bytes.alloc",0]],0],["let","pre_len",["codec.read_u32_le","doc",13]],["let","build_len_off",["+",17,"pre_len"]],["if",["<u","n",["+","build_len_off",4]],["return",["bytes.alloc",0]],0],["let","build_len",["codec.read_u32_le","doc","build_len_off"]],["if",["<=","build_len",0],["return",["bytes.alloc",0]],0],["let","build_start",["+","build_len_off",4]],["if",["<u","n",["+","build_start","build_len"]],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc","build_start","build_len"]]],"kind":"defn","name":"ext.semver.semver_build","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","a_bytes",["ext.semver.semver_parse","a"]],["let","a_view",["bytes.view","a_bytes"]],["if",["ext.semver.semver_is_err","a_view"],["return",["-",0,2]],0],["let","b_bytes",["ext.semver.semver_parse","b"]],["let","b_view",["bytes.view","b_bytes"]],["if",["ext.semver.semver_is_err","b_view"],["return",["-",0,2]],0],["ext.semver._cmp_docs","a_view","b_view"]],"kind":"defn","name":"ext.semver.semver_cmp_str","params":[{"name":"a","ty":"bytes_view"},{"name":"b","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],0],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.semver.semver_err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["=",["view.get_u8","doc",0],0]],"kind":"defn","name":"ext.semver.semver_is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.semver.semver_major","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],9],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",0],0],["codec.read_u32_le","doc",5]],"kind":"defn","name":"ext.semver.semver_minor","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","s"]],["if",["<","n",5],["return",["ext.semver._make_err",1]],0],["let","dot1",["ext.semver._find_dot_or_end","s",0]],["if",["=","dot1","n"],["return",["ext.semver._make_err",1]],0],["let","major",["ext.semver._parse_u31","s",0,"dot1"]],["if",["<","major",0],["return",["ext.semver._make_err",2]],0],["let","minor_start",["+","dot1",1]],["if",[">=u","minor_start","n"],["return",["ext.semver._make_err",1]],0],["let","dot2",["ext.semver._find_dot_or_end","s","minor_start"]],["if",["=","dot2","n"],["return",["ext.semver._make_err",1]],0],["let","minor",["ext.semver._parse_u31","s","minor_start","dot2"]],["if",["<","minor",0],["return",["ext.semver._make_err",2]],0],["let","patch_start",["+","dot2",1]],["if",[">=u","patch_start","n"],["return",["ext.semver._make_err",1]],0],["let","patch_end",["ext.semver._find_end_of_patch","s","patch_start"]],["if",["<","patch_end",0],["return",["ext.semver._make_err",1]],0],["let","patch",["ext.semver._parse_u31","s","patch_start","patch_end"]],["if",["<","patch",0],["return",["ext.semver._make_err",2]],0],["let","pre_start",0],["let","pre_end",0],["let","has_pre",0],["let","build_start",0],["let","build_end",0],["let","has_build",0],["if",["<u","patch_end","n"],["begin",["let","c",["view.get_u8","s","patch_end"]],["if",["=","c",45],["begin",["set","pre_start",["+","patch_end",1]],["set","pre_end",["ext.semver._find_plus_or_end","s","pre_start"]],["set","has_pre",1],["if",["=",["ext.semver._validate_dot_separated","s","pre_start","pre_end",1],0],["return",["ext.semver._make_err",3]],0],["if",["<u","pre_end","n"],["begin",["set","build_start",["+","pre_end",1]],["set","build_end","n"],["set","has_build",1]],0]],["if",["=","c",43],["begin",["set","build_start",["+","patch_end",1]],["set","build_end","n"],["set","has_build",1]],["return",["ext.semver._make_err",1]]]]],0],["if",["=","has_build",1],["if",["=",["ext.semver._validate_dot_separated","s","build_start","build_end",0],0],["return",["ext.semver._make_err",4]],0],0],["let","pre_len",["if",["=","has_pre",1],["-","pre_end","pre_start"],0]],["let","build_len",["if",["=","has_build",1],["-","build_end","build_start"],0]],["let","out",["vec_u8.with_capacity",["+",["+",21,"pre_len"],"build_len"]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","major"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","minor"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","patch"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","pre_len"]]],["if",[">","pre_len",0],["set","out",["vec_u8.extend_bytes_range","out","s","pre_start","pre_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","build_len"]]],["if",[">","build_len",0],["set","out",["vec_u8.extend_bytes_range","out","s","build_start","build_len"]],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.semver.semver_parse","params":[{"name":"s","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],13],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",0],0],["codec.read_u32_le","doc",9]],"kind":"defn","name":"ext.semver.semver_patch","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",17],["return",["bytes.alloc",0]],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",["bytes.alloc",0]],0],["let","pre_len",["codec.read_u32_le","doc",13]],["if",["<=","pre_len",0],["return",["bytes.alloc",0]],0],["if",["<u","n",["+",17,"pre_len"]],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",17,"pre_len"]]],"kind":"defn","name":"ext.semver.semver_prerelease","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"}],"imports":[],"kind":"module","meta":{"generated_by":"x07import","source_path":"tests/x07import/fixtures/import_sources/rust/ext_semver@0.1.0/semver.rs","source_sha256":"4e80e6f177f60db3d0e6d79c44dde5323213add13eadd7b833aee50fc97d411f"},"module_id":"ext.semver","schema_version":"x07.x07ast@0.2.0"}
