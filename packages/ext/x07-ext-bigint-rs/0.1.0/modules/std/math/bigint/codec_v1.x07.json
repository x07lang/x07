{
  "schema_version": "x07.x07ast@0.1.0",
  "kind": "module",
  "module_id": "std.math.bigint.codec_v1",
  "imports": [],
  "decls": [
    {
      "kind": "export",
      "names": [
        "std.math.bigint.codec_v1.sign_v1",
        "std.math.bigint.codec_v1.is_valid_v1",
        "std.math.bigint.codec_v1.is_zero_v1",
        "std.math.bigint.codec_v1.mag_view_v1",
        "std.math.bigint.codec_v1.canon_v1"
      ]
    },
    {
      "kind": "defn",
      "name": "std.math.bigint.codec_v1.sign_v1",
      "params": [{ "name": "v", "ty": "bytes_view" }],
      "result": "i32",
      "body": [
        "begin",
        ["let", "n", ["view.len", "v"]],
        ["if", ["<u", "n", 1], ["return", -1], 0],
        ["let", "s", ["view.get_u8", "v", 0]],
        ["if", ["if", ["if", ["=", "s", 0], 1, ["=", "s", 1]], 1, ["=", "s", 2]], ["return", "s"], 0],
        -1
      ]
    },
    {
      "kind": "defn",
      "name": "std.math.bigint.codec_v1.is_valid_v1",
      "params": [{ "name": "v", "ty": "bytes_view" }],
      "result": "i32",
      "body": [
        "begin",
        ["let", "s", ["std.math.bigint.codec_v1.sign_v1", "v"]],
        ["if", ["<", "s", 0], 0, 1]
      ]
    },
    {
      "kind": "defn",
      "name": "std.math.bigint.codec_v1.is_zero_v1",
      "params": [{ "name": "v", "ty": "bytes_view" }],
      "result": "i32",
      "body": [
        "begin",
        ["let", "n", ["view.len", "v"]],
        ["if", ["<u", "n", 1], ["return", 0], 0],
        ["let", "s", ["view.get_u8", "v", 0]],
        ["if", ["=", "s", 0], ["return", 1], 0],
        ["if", ["if", ["=", "s", 1], 1, ["=", "s", 2]], 0, ["return", 0]],
        ["if", ["=", "n", 1], ["return", 1], 0],
        [
          "for",
          "i",
          1,
          "n",
          ["if", ["=", ["view.get_u8", "v", "i"], 0], 0, ["return", 0]]
        ],
        1
      ]
    },
    {
      "kind": "defn",
      "name": "std.math.bigint.codec_v1.mag_view_v1",
      "params": [{ "name": "v", "ty": "bytes_view" }],
      "result": "bytes_view",
      "body": [
        "begin",
        ["let", "n", ["view.len", "v"]],
        ["if", ["<u", "n", 2], ["return", ["view.slice", "v", "n", 0]], 0],
        ["view.slice", "v", 1, ["-", "n", 1]]
      ]
    },
    {
      "kind": "defn",
      "name": "std.math.bigint.codec_v1.canon_v1",
      "params": [{ "name": "v", "ty": "bytes_view" }],
      "result": "bytes",
      "body": [
        "begin",
        ["let", "n", ["view.len", "v"]],
        ["if", ["<u", "n", 1], ["return", ["bytes.alloc", 0]], 0],
        ["let", "s", ["view.get_u8", "v", 0]],
        ["if", ["if", ["if", ["=", "s", 0], 1, ["=", "s", 1]], 1, ["=", "s", 2]], 0, ["return", ["bytes.alloc", 0]]],
        ["if", ["=", "s", 0], ["return", ["bytes.alloc", 1]], 0],
        ["if", ["=", "n", 1], ["return", ["bytes.alloc", 1]], 0],
        ["let", "i", 1],
        ["let", "found", 0],
        [
          "for",
          "_",
          1,
          "n",
          [
            "if",
            ["=", "found", 0],
            [
              "if",
              ["=", ["view.get_u8", "v", "i"], 0],
              ["set", "i", ["+", "i", 1]],
              ["set", "found", 1]
            ],
            0
          ]
        ],
        ["if", ["=", "found", 0], ["return", ["bytes.alloc", 1]], 0],
        ["if", [">=u", "i", "n"], ["return", ["bytes.alloc", 1]], 0],
        ["let", "mag_len", ["-", "n", "i"]],
        ["let", "out", ["vec_u8.with_capacity", ["+", 1, "mag_len"]]],
        ["set", "out", ["vec_u8.push", "out", "s"]],
        ["set", "out", ["vec_u8.extend_bytes_range", "out", "v", "i", "mag_len"]],
        ["vec_u8.into_bytes", "out"]
      ]
    }
  ],
  "meta": {
    "generated_by": "manual",
    "package": "x07:ext-bigint-rs@0.1.0"
  }
}

