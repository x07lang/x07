{"decls":[],"imports":["ext.curl.http","std.io","test.fixtures.file_url"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.3.0","solve":["begin",["let","rc",["ext.curl.http.init"]],["if",["=","rc",0],["begin",["let","url",["test.fixtures.file_url.external_os_file_url_v1"]],["let","out_path",["bytes.lit","tmp/curl_download.bin"]],["let","headers",["ext.curl.http.headers_new"]],["let","req",["ext.curl.http.req_get_to_file_v3",["bytes.view","url"],["bytes.view","headers"],["bytes.view","out_path"],0,30,0,4096,64]],["let","doc",["ext.curl.http.request_v2",["bytes.view","req"],65536]],["let","_",["ext.curl.http.cleanup"]],["let","docv",["bytes.view","doc"]],["if",["ext.curl.http.is_err","docv"],["bytes.lit","err"],["begin",["if",["!=",["ext.curl.http.resp_ver","docv"],3],["return",["bytes.lit","err"]],0],["let","path",["ext.curl.http.resp_file_path_v3","docv"]],["let","len",["ext.curl.http.resp_file_len_v3","docv"]],["if",["=",["bytes.len","path"],0],["return",["bytes.lit","err"]],0],["if",["<","len",1],["return",["bytes.lit","err"]],0],["let","reader",["ext.curl.http.resp_file_reader_v3","docv"]],["let","file",["std.io.read_all","reader"]],["if",["!=",["bytes.len","file"],"len"],["return",["bytes.lit","err"]],0],["bytes.lit","ok"]]]],["bytes.lit","err"]]]}
