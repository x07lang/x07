{"decls":[],"imports":["std.bytes","std.os.fs","std.os.fs.spec"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.1.0","solve":["begin",["let","caps",["std.os.fs.spec.caps_default_v1"]],["let","va",["vec_u8.with_capacity",2]],["set","va",["vec_u8.extend_bytes","va",["bytes.lit","A"]]],["set","va",["vec_u8.push","va",10]],["let","a_expect",["vec_u8.into_bytes","va"]],["let","ok_path",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/a.txt"]],["let","deny_path",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/denied/secret.txt"]],["let","ok_code",["result_bytes.err_code",["std.os.fs.read_all_v1",["std.bytes.copy","ok_path"],["std.bytes.copy","caps"]]]],["if",["!=","ok_code",0],["return",["bytes.lit","FAIL_read_ok_not_ok"]],0],["let","got",["result_bytes.unwrap_or",["std.os.fs.read_all_v1",["std.bytes.copy","ok_path"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","got","a_expect"],0],["return",["bytes.lit","FAIL_read_ok_mismatch"]],0],["let","deny_code",["result_bytes.err_code",["std.os.fs.read_all_v1","deny_path",["std.bytes.copy","caps"]]]],["if",["!=","deny_code",["std.os.fs.spec.err_policy_deny_v1"]],["return",["bytes.lit","FAIL_deny_code"]],0],["let","ls_code",["result_bytes.err_code",["std.os.fs.list_dir_sorted_text_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed"],["std.bytes.copy","caps"]]]],["if",["!=","ls_code",["std.os.fs.spec.err_policy_deny_v1"]],["return",["bytes.lit","FAIL_ls_code"]],0],["let","data",["bytes.lit","Z"]],["let","w_code",["result_i32.err_code",["std.os.fs.write_all_v1",["bytes.lit","target/fs-policy-deny-smoke/out.txt"],"data",["std.bytes.copy","caps"]]]],["if",["!=","w_code",["std.os.fs.spec.err_policy_deny_v1"]],["return",["bytes.lit","FAIL_write_code"]],0],["bytes.lit","OK"]]}
