{"decls":[],"imports":["std.net.codec","std.net.err","std.net.http.server","std.net.tcp"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.2.0","solve":["begin",["let","caps",["std.net.codec.caps_v1",60000,60000,65536,65536]],["let","caps_v",["bytes.view","caps"]],["let","addr",["std.net.codec.addr_ipv4_v1",127,0,0,1,30031]],["let","ldoc",["std.net.tcp.listen_v1",["bytes.view","addr"],"caps_v"]],["let","ldoc_v",["bytes.view","ldoc"]],["if",["std.net.err.is_err_doc_v1","ldoc_v"],["return",["bytes.lit","err"]],0],["let","listener",["std.net.tcp.listen_listener_handle_v1","ldoc_v"]],["if",["<=","listener",0],["return",["bytes.lit","err"]],0],["let","adoc",["std.net.tcp.accept_v1","listener","caps_v"]],["let","adoc_v",["bytes.view","adoc"]],["if",["std.net.err.is_err_doc_v1","adoc_v"],["return",["bytes.lit","err"]],0],["let","stream",["std.net.tcp.accept_stream_handle_v1","adoc_v"]],["if",["<=","stream",0],["return",["bytes.lit","err"]],0],["let","req_doc",["std.net.http.server.read_req_v1","stream","caps_v"]],["let","req_v",["bytes.view","req_doc"]],["if",["std.net.err.is_err_doc_v1","req_v"],["return",["bytes.lit","err"]],0],["let","target",["std.net.http.server.req_target_v1","req_v"]],["let","expect",["bytes.lit","/hello"]],["if",["=",["bytes.eq",["bytes.view","target"],["bytes.view","expect"]],0],["return",["bytes.lit","err"]],0],["let","empty",["bytes.alloc",0]],["let","body",["bytes.lit","hello"]],["let","wdoc",["std.net.http.server.write_response_v1","stream",200,["bytes.view","empty"],["bytes.view","body"],"caps_v"]],["let","wdoc_v",["bytes.view","wdoc"]],["if",["std.net.err.is_err_doc_v1","wdoc_v"],["return",["bytes.lit","err"]],0],["std.net.tcp.stream_close_v1","stream"],["std.net.tcp.stream_drop_v1","stream"],["std.net.tcp.listener_close_v1","listener"],["std.net.tcp.listener_drop_v1","listener"],["bytes.lit","ok"]]}
