{"decls":[],"imports":["std.bytes","std.os.fs","std.os.fs.spec"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.1.0","solve":["begin",["let","caps",["std.os.fs.spec.caps_default_v1"]],["let","va",["vec_u8.with_capacity",2]],["set","va",["vec_u8.extend_bytes","va",["bytes.lit","A"]]],["set","va",["vec_u8.push","va",10]],["let","a_expect",["vec_u8.into_bytes","va"]],["let","vls",["vec_u8.with_capacity",16]],["set","vls",["vec_u8.extend_bytes","vls",["bytes.lit","a.txt"]]],["set","vls",["vec_u8.push","vls",10]],["set","vls",["vec_u8.extend_bytes","vls",["bytes.lit","b.txt"]]],["set","vls",["vec_u8.push","vls",10]],["set","vls",["vec_u8.extend_bytes","vls",["bytes.lit","sub"]]],["set","vls",["vec_u8.push","vls",10]],["let","ls_expect",["vec_u8.into_bytes","vls"]],["let","vwalk",["vec_u8.with_capacity",24]],["set","vwalk",["vec_u8.extend_bytes","vwalk",["bytes.lit","a.txt"]]],["set","vwalk",["vec_u8.push","vwalk",10]],["set","vwalk",["vec_u8.extend_bytes","vwalk",["bytes.lit","b.txt"]]],["set","vwalk",["vec_u8.push","vwalk",10]],["set","vwalk",["vec_u8.extend_bytes","vwalk",["bytes.lit","sub/c.txt"]]],["set","vwalk",["vec_u8.push","vwalk",10]],["let","walk_expect",["vec_u8.into_bytes","vwalk"]],["let","vz",["vec_u8.with_capacity",2]],["set","vz",["vec_u8.extend_bytes","vz",["bytes.lit","Z"]]],["set","vz",["vec_u8.push","vz",10]],["let","data",["vec_u8.into_bytes","vz"]],["std.os.fs.remove_dir_all_v1",["bytes.lit","target/fs-smoke-v1"],["std.bytes.copy","caps"]],["let","a_code",["result_bytes.err_code",["std.os.fs.read_all_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/a.txt"],["std.bytes.copy","caps"]]]],["if",["!=","a_code",0],["return",["bytes.lit","FAIL_read_a_not_ok"]],0],["let","a",["result_bytes.unwrap_or",["std.os.fs.read_all_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/a.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","a","a_expect"],0],["return",["bytes.lit","FAIL_read_a_mismatch"]],0],["let","ls_code",["result_bytes.err_code",["std.os.fs.list_dir_sorted_text_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed"],["std.bytes.copy","caps"]]]],["if",["!=","ls_code",0],["return",["bytes.lit","FAIL_ls_not_ok"]],0],["let","ls",["result_bytes.unwrap_or",["std.os.fs.list_dir_sorted_text_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","ls","ls_expect"],0],["return",["bytes.lit","FAIL_ls_mismatch"]],0],["let","walk_code",["result_bytes.err_code",["std.os.fs.walk_glob_sorted_text_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed"],["bytes.lit","**/*.txt"],["std.bytes.copy","caps"]]]],["if",["!=","walk_code",0],["return",["bytes.lit","FAIL_walk_not_ok"]],0],["let","walk",["result_bytes.unwrap_or",["std.os.fs.walk_glob_sorted_text_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed"],["bytes.lit","**/*.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","walk","walk_expect"],0],["return",["bytes.lit","FAIL_walk_mismatch"]],0],["let","stat_code",["result_bytes.err_code",["std.os.fs.stat_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/a.txt"],["std.bytes.copy","caps"]]]],["if",["!=","stat_code",0],["return",["bytes.lit","FAIL_stat_not_ok"]],0],["let","stat",["result_bytes.unwrap_or",["std.os.fs.stat_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/a.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["let","statv",["bytes.view","stat"]],["if",["!=",["std.os.fs.spec.stat_version_v1","statv"],1],["return",["bytes.lit","FAIL_stat_ver"]],0],["if",["!=",["std.os.fs.spec.stat_kind_v1","statv"],1],["return",["bytes.lit","FAIL_stat_kind"]],0],["if",["!=",["std.os.fs.spec.stat_size_u32_v1","statv"],2],["return",["bytes.lit","FAIL_stat_size"]],0],["let","missing_code",["result_bytes.err_code",["std.os.fs.stat_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/missing.txt"],["std.bytes.copy","caps"]]]],["if",["!=","missing_code",0],["return",["bytes.lit","FAIL_stat_missing_not_ok"]],0],["let","missing",["result_bytes.unwrap_or",["std.os.fs.stat_v1",["bytes.lit","benchmarks/fixtures/os/fs-smoke-v1/allowed/missing.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["!=",["std.os.fs.spec.stat_kind_v1",["bytes.view","missing"]],0],["return",["bytes.lit","FAIL_stat_missing_kind"]],0],["let","mkdir_code",["result_i32.err_code",["std.os.fs.mkdirs_v1",["bytes.lit","target/fs-smoke-v1"],["std.bytes.copy","caps"]]]],["if",["!=","mkdir_code",0],["return",["bytes.lit","FAIL_mkdirs"]],0],["let","write_code",["result_i32.err_code",["std.os.fs.write_all_v1",["bytes.lit","target/fs-smoke-v1/out.txt"],["std.bytes.copy","data"],["std.bytes.copy","caps"]]]],["if",["!=","write_code",0],["return",["bytes.lit","FAIL_write_not_ok"]],0],["let","out1_code",["result_bytes.err_code",["std.os.fs.read_all_v1",["bytes.lit","target/fs-smoke-v1/out.txt"],["std.bytes.copy","caps"]]]],["if",["!=","out1_code",0],["return",["bytes.lit","FAIL_read_out_not_ok"]],0],["let","out1",["result_bytes.unwrap_or",["std.os.fs.read_all_v1",["bytes.lit","target/fs-smoke-v1/out.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","out1","data"],0],["return",["bytes.lit","FAIL_read_out_mismatch"]],0],["let","ren_code",["result_i32.err_code",["std.os.fs.rename_v1",["bytes.lit","target/fs-smoke-v1/out.txt"],["bytes.lit","target/fs-smoke-v1/out2.txt"],["std.bytes.copy","caps"]]]],["if",["!=","ren_code",0],["return",["bytes.lit","FAIL_rename_not_ok"]],0],["let","out2_code",["result_bytes.err_code",["std.os.fs.read_all_v1",["bytes.lit","target/fs-smoke-v1/out2.txt"],["std.bytes.copy","caps"]]]],["if",["!=","out2_code",0],["return",["bytes.lit","FAIL_read_out2_not_ok"]],0],["let","out2",["result_bytes.unwrap_or",["std.os.fs.read_all_v1",["bytes.lit","target/fs-smoke-v1/out2.txt"],["std.bytes.copy","caps"]],["bytes.alloc",0]]],["if",["=",["bytes.eq","out2","data"],0],["return",["bytes.lit","FAIL_read_out2_mismatch"]],0],["let","rm_code",["result_i32.err_code",["std.os.fs.remove_file_v1",["bytes.lit","target/fs-smoke-v1/out2.txt"],["std.bytes.copy","caps"]]]],["if",["!=","rm_code",0],["return",["bytes.lit","FAIL_rm_not_ok"]],0],["let","rmd_code",["result_i32.err_code",["std.os.fs.remove_dir_all_v1",["bytes.lit","target/fs-smoke-v1"],["std.bytes.copy","caps"]]]],["if",["!=","rmd_code",0],["return",["bytes.lit","FAIL_rmdir_not_ok"]],0],["bytes.lit","OK"]]}
