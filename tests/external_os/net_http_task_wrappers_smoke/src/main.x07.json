{"decls":[{"body":["begin",["let","dv",["bytes.view","doc"]],["if",["=",["std.net.err.is_err_doc_v1","dv"],0],["return",0],0],["let","code",["std.net.err.err_code_v1","dv"]],["if",["=","code",["std.net.err.code_timeout_v1"]],1,0]],"kind":"defn","name":"main.is_timeout_err_doc_v1","params":[{"name":"doc","ty":"bytes"}],"result":"i32"}],"imports":["std.net.codec","std.net.err","std.net.http.server","std.net.io","std.net.tcp"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.3.0","solve":["begin",["let","max_iters",0],["let","caps",["std.net.codec.caps_v1",0,0,65536,65536]],["let","caps_v",["bytes.view","caps"]],["let","addr",["std.net.codec.addr_ipv4_v1",127,0,0,1,30000]],["let","addr_v",["bytes.view","addr"]],["let","data",["bytes.lit","hi"]],["let","data_v",["bytes.view","data"]],["let","h_accept",["std.net.tcp.accept_task_v1",1,"caps_v","max_iters"]],["task.spawn","h_accept"],["let","doc_accept",["await","h_accept"]],["if",["=",["main.is_timeout_err_doc_v1","doc_accept"],0],["return",["bytes.lit","err"]],0],["let","h_connect",["std.net.tcp.connect_task_v1","addr_v","caps_v","max_iters"]],["task.spawn","h_connect"],["let","doc_connect",["await","h_connect"]],["if",["=",["main.is_timeout_err_doc_v1","doc_connect"],0],["return",["bytes.lit","err"]],0],["let","h_read",["std.net.tcp.stream_read_task_v1",1,1,"caps_v","max_iters"]],["task.spawn","h_read"],["let","doc_read",["await","h_read"]],["if",["=",["main.is_timeout_err_doc_v1","doc_read"],0],["return",["bytes.lit","err"]],0],["let","h_write",["std.net.tcp.stream_write_task_v1",1,"data_v","caps_v","max_iters"]],["task.spawn","h_write"],["let","doc_write",["await","h_write"]],["if",["=",["main.is_timeout_err_doc_v1","doc_write"],0],["return",["bytes.lit","err"]],0],["let","h_write_all",["std.net.io.write_all_task_v1",1,"data_v","caps_v","max_iters"]],["task.spawn","h_write_all"],["let","doc_write_all",["await","h_write_all"]],["if",["=",["main.is_timeout_err_doc_v1","doc_write_all"],0],["return",["bytes.lit","err"]],0],["let","h_read_req",["std.net.http.server.read_req_task_v1",1,"caps_v","max_iters"]],["task.spawn","h_read_req"],["let","doc_read_req",["await","h_read_req"]],["if",["=",["main.is_timeout_err_doc_v1","doc_read_req"],0],["return",["bytes.lit","err"]],0],["let","empty",["bytes.alloc",0]],["let","empty_v",["bytes.view","empty"]],["let","h_write_resp",["std.net.http.server.write_response_task_v1",1,200,"empty_v","data_v","caps_v","max_iters"]],["task.spawn","h_write_resp"],["let","doc_write_resp",["await","h_write_resp"]],["if",["=",["main.is_timeout_err_doc_v1","doc_write_resp"],0],["return",["bytes.lit","err"]],0],["bytes.lit","ok"]]}
