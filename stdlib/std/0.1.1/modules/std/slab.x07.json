{"decls":[{"kind":"export","names":["std.slab.alloc_u32","std.slab.cap_u32","std.slab.free_head_u32","std.slab.free_u32","std.slab.get_u32","std.slab.len_u32","std.slab.new_u32","std.slab.set_u32"]},{"body":["begin",["let","cap",["std.slab.cap_u32","slab"]],["if",["<u",0,"h"],["if",["<u","cap","h"],0,1],0]],"kind":"defn","name":"std.slab._check_handle","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":12,"kind":"defn","name":"std.slab._next_base","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",["std.slab._slot_off",["std.slab._next_base","slab"],"h"]],"kind":"defn","name":"std.slab._next_get","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":["begin",["let","base",["std.slab._next_base","slab"]],["let","off",["std.slab._slot_off","base","h"]],["std.u32.write_le_at","slab","off","v"]],"kind":"defn","name":"std.slab._next_set","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"},{"body":["+","base",["*",["-","h",1],4]],"kind":"defn","name":"std.slab._slot_off","params":[{"name":"base","ty":"i32"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",["std.slab._slot_off",["std.slab._vals_base","slab"],"h"]],"kind":"defn","name":"std.slab._val_get","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":["begin",["let","base",["std.slab._vals_base","slab"]],["let","off",["std.slab._slot_off","base","h"]],["std.u32.write_le_at","slab","off","v"]],"kind":"defn","name":"std.slab._val_set","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"},{"body":["+",12,["*",["std.slab.cap_u32","slab"],4]],"kind":"defn","name":"std.slab._vals_base","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","cap",["std.slab.cap_u32","slab"]],["if",["=","cap",0],["return","slab"],0],["let","head",["std.slab.free_head_u32","slab"]],["if",["=","head",0],["return","slab"],0],["let","next",["std.slab._next_get","slab","head"]],["let","len",["+",["std.slab.len_u32","slab"],1]],["set","slab",["std.u32.write_le_at","slab",8,"next"]],["set","slab",["std.slab._next_set","slab","head",-1]],["set","slab",["std.u32.write_le_at","slab",4,"len"]],"slab"],"kind":"defn","name":"std.slab.alloc_u32","params":[{"name":"slab","ty":"bytes"}],"result":"bytes"},{"body":["std.u32.read_le_at","slab",0],"kind":"defn","name":"std.slab.cap_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",8],"kind":"defn","name":"std.slab.free_head_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["=",["std.slab._check_handle","slab","h"],0],["return","slab"],0],["if",["=",["std.slab._next_get","slab","h"],-1],0,["return","slab"]],["let","head",["std.slab.free_head_u32","slab"]],["let","len",["-",["std.slab.len_u32","slab"],1]],["set","slab",["std.slab._next_set","slab","h","head"]],["set","slab",["std.u32.write_le_at","slab",8,"h"]],["set","slab",["std.u32.write_le_at","slab",4,"len"]],"slab"],"kind":"defn","name":"std.slab.free_u32","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"}],"result":"bytes"},{"body":["if",["if",["=",["std.slab._check_handle","slab","h"],1],["=",["std.slab._next_get","slab","h"],-1],0],["std.slab._val_get","slab","h"],"default"],"kind":"defn","name":"std.slab.get_u32","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"},{"name":"default","ty":"i32"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",4],"kind":"defn","name":"std.slab.len_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","cap2",["if",["<","cap",0],0,"cap"]],["let","out",["bytes.alloc",["+",12,["*","cap2",8]]]],["set","out",["std.u32.write_le_at","out",0,"cap2"]],["set","out",["std.u32.write_le_at","out",4,0]],["set","out",["std.u32.write_le_at","out",8,["if",["=","cap2",0],0,1]]],["for","i",0,"cap2",["begin",["let","h",["+","i",1]],["let","next",["if",["=","h","cap2"],0,["+","h",1]]],["set","out",["std.u32.write_le_at","out",["+",12,["*","i",4]],"next"]],["set","out",["std.u32.write_le_at","out",["+",["+",12,["*","cap2",4]],["*","i",4]],0]],0]],"out"],"kind":"defn","name":"std.slab.new_u32","params":[{"name":"cap","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["if",["=",["std.slab._check_handle","slab","h"],1],["=",["std.slab._next_get","slab","h"],-1],0],0,["return","slab"]],["std.slab._val_set","slab","h","v"]],"kind":"defn","name":"std.slab.set_u32","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"}],"imports":["std.u32"],"kind":"module","module_id":"std.slab","schema_version":"x07.x07ast@0.1.0"}
