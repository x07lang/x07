{"decls":[{"kind":"export","names":["std.json.canonicalize_small","std.json.extract_path_canon_or_err"]},{"body":["begin",["let","a_off",["codec.read_u32_le","offsets",["*","a",4]]],["let","b_off",["codec.read_u32_le","offsets",["*","b",4]]],["let","a_len",["codec.read_u32_le","members","a_off"]],["let","b_len",["codec.read_u32_le","members","b_off"]],["let","a_start",["+","a_off",4]],["let","b_start",["+","b_off",4]],["let","min_len",["if",["<u","a_len","b_len"],"a_len","b_len"]],["for","i",0,"min_len",["begin",["let","ac",["bytes.get_u8","members",["+","a_start","i"]]],["let","bc",["bytes.get_u8","members",["+","b_start","i"]]],["if",["<u","ac","bc"],["return",-1],0],["if",["<u","bc","ac"],["return",1],0],0]],["if",["=","a_len","b_len"],0,["if",["<u","a_len","b_len"],-1,1]]],"kind":"defn","name":"std.json._cmp_member_key","params":[{"name":"members","ty":"bytes_view"},{"name":"offsets","ty":"bytes_view"},{"name":"a","ty":"i32"},{"name":"b","ty":"i32"}],"result":"i32"},{"body":["begin",["let","off",["codec.read_u32_le","offsets",["*","idx",4]]],["let","key_len",["codec.read_u32_le","members","off"]],["let","key_start",["+","off",4]],["let","val_len_off",["+","key_start","key_len"]],["let","val_len",["codec.read_u32_le","members","val_len_off"]],["let","val_start",["+","val_len_off",4]],["set","out",["vec_u8.push","out",34]],["set","out",["vec_u8.extend_bytes_range","out","members","key_start","key_len"]],["set","out",["vec_u8.push","out",34]],["set","out",["vec_u8.push","out",58]],["set","out",["vec_u8.extend_bytes_range","out","members","val_start","val_len"]],"out"],"kind":"defn","name":"std.json._emit_member_kv","params":[{"name":"members","ty":"bytes_view"},{"name":"offsets","ty":"bytes_view"},{"name":"idx","ty":"i32"},{"name":"out","ty":"vec_u8"}],"result":"vec_u8"},{"body":["begin",["set","out",["vec_u8.push","out",123]],["let","used",["bytes.alloc","count"]],["let","first",1],["for","_",0,"count",["begin",["let","best",-1],["for","j",0,"count",["begin",["if",["=",["bytes.get_u8","used","j"],1],0,["if",["=","best",-1],["set","best","j"],["if",["<",["std.json._cmp_member_key","members","offsets","j","best"],0],["set","best","j"],0]]],0]],["set","used",["bytes.set_u8","used","best",1]],["if",["=","first",0],["begin",["set","out",["vec_u8.push","out",44]],0],["set","first",0]],["set","out",["std.json._emit_member_kv","members","offsets","best","out"]],0]],["set","out",["vec_u8.push","out",125]],"out"],"kind":"defn","name":"std.json._emit_object_sorted","params":[{"name":"members","ty":"bytes_view"},{"name":"offsets","ty":"bytes_view"},{"name":"count","ty":"i32"},{"name":"out","ty":"vec_u8"}],"result":"vec_u8"},{"body":["bytes.lit","ERR"],"kind":"defn","name":"std.json._err","params":[],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","target",["std.json._segment_at","segs","seg_idx"]],["let","target_len",["bytes.len","target"]],["if",["=","target_len",0],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],125],["return",["std.json._err"]],0],["for","_",0,["+","n",1],["begin",["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],34],0,["return",["std.json._err"]]],["let","key_start",["+","i",1]],["let","key_end",["std.json._string_end_or_err","b","key_start"]],["if",["<","key_end",0],["return",["std.json._err"]],0],["let","key_len",["-","key_end","key_start"]],["set","i",["+","key_end",1]],["set","i",["std.json._skip_ws","b","i"]],["if",["if",[">=u","i","n"],1,["=",["bytes.get_u8","b","i"],58]],0,["return",["std.json._err"]]],["set","i",["+","i",1]],["if",["if",["=","key_len","target_len"],["=",["bytes.cmp_range","b","key_start","key_len","target",0,"target_len"],0],0],["begin",["let","next_idx",["+","seg_idx",1]],["return",["std.json._extract_from_value","b","i","segs","next_idx","seg_count"]]],["begin",["let","end",["std.json._skip_value","b","i"]],["if",["<","end",0],["return",["std.json._err"]],["set","i",["std.json._skip_ws","b","end"]]]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c",125],["return",["std.json._err"]],["return",["std.json._err"]]]],0]],["std.json._err"]],"kind":"defn","name":"std.json._extract_from_object","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"},{"name":"segs","ty":"bytes_view"},{"name":"seg_idx","ty":"i32"},{"name":"seg_count","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b","off"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=","seg_idx","seg_count"],["std.json._parse_value","b","i"],["if",["=",["bytes.get_u8","b","i"],123],["std.json._extract_from_object","b","i","segs","seg_idx","seg_count"],["std.json._err"]]]],"kind":"defn","name":"std.json._extract_from_value","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"},{"name":"segs","ty":"bytes_view"},{"name":"seg_idx","ty":"i32"},{"name":"seg_count","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["for","i",0,"n",["begin",["if",["=",["bytes.get_u8","b","i"],"target"],["return","i"],0],0]],-1],"kind":"defn","name":"std.json._find_byte","params":[{"name":"b","ty":"bytes_view"},{"name":"target","ty":"i32"}],"result":"i32"},{"body":["if",[">=u","c",48],["if",["<u","c",58],1,0],0],"kind":"defn","name":"std.json._is_digit","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["if",["=","c",32],1,["if",["=","c",9],1,["if",["=","c",10],1,["if",["=","c",13],1,0]]]],"kind":"defn","name":"std.json._is_ws","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["let","m",["bytes.len","lit"]],["if",[">=u",["+","off","m"],["+","n",1]],["return",0],0],["for","i",0,"m",["begin",["if",["=",["bytes.get_u8","b",["+","off","i"]],["bytes.get_u8","lit","i"]],0,["return",0]],0]],1],"kind":"defn","name":"std.json._match_bytes_at","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"},{"name":"lit","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","off",["codec.read_u32_le","offsets",["*","idx",4]]],["let","key_len",["codec.read_u32_le","members","off"]],["bytes.slice","members",["+","off",4],"key_len"]],"kind":"defn","name":"std.json._member_key","params":[{"name":"members","ty":"bytes_view"},{"name":"offsets","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",["+","len",4]]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes_range","out","b","start","len"]],["let","out_b",["vec_u8.into_bytes","out"]],["std.json._pack_u32le_prefix","out_b","end"]],"kind":"defn","name":"std.json._pack_range","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"len","ty":"i32"},{"name":"end","ty":"i32"}],"result":"bytes"},{"body":["begin",["set","b",["bytes.set_u8","b",0,["&","x",255]]],["set","b",["bytes.set_u8","b",1,["&",[">>u","x",8],255]]],["set","b",["bytes.set_u8","b",2,["&",[">>u","x",16],255]]],["set","b",["bytes.set_u8","b",3,["&",[">>u","x",24],255]]],"b"],"kind":"defn","name":"std.json._pack_u32le_prefix","params":[{"name":"b","ty":"bytes"},{"name":"x","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","out",["vec_u8.with_capacity",["bytes.len","b"]]],["set","out",["vec_u8.push","out",91]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],93],["begin",["set","out",["vec_u8.push","out",93]],["return",["vec_u8.into_bytes","out"]]],0],["let","first",1],["for","_",0,["+","n",1],["begin",["if",["=","first",0],["begin",["set","out",["vec_u8.push","out",44]],0],["set","first",0]],["let","val",["std.json._parse_value","b","i"]],["if",["bytes.eq","val",["std.json._err"]],["return",["std.json._err"]],0],["set","out",["vec_u8.extend_bytes","out","val"]],["let","end",["std.json._skip_value","b","i"]],["if",["<","end",0],["return",["std.json._err"]],0],["set","i",["std.json._skip_ws","b","end"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c",93],["begin",["set","out",["vec_u8.push","out",93]],["return",["vec_u8.into_bytes","out"]]],["return",["std.json._err"]]]],0]],["std.json._err"]],"kind":"defn","name":"std.json._parse_array","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","out",["vec_u8.with_capacity",["+",["bytes.len","b"],4]]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",91]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],93],["begin",["set","out",["vec_u8.push","out",93]],["let","end",["+","i",1]],["let","out_b",["vec_u8.into_bytes","out"]],["return",["std.json._pack_u32le_prefix","out_b","end"]]],0],["let","first",1],["for","_",0,["+","n",1],["begin",["if",["=","first",0],["begin",["set","out",["vec_u8.push","out",44]],0],["set","first",0]],["set","i",["std.json._skip_ws","b","i"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",123],["begin",["let","pkg",["std.json._parse_object_pack","b","i"]],["if",["bytes.eq","pkg",["std.json._err"]],["return",["std.json._err"]],0],["let","pkg_view",["bytes.view","pkg"]],["let","end",["codec.read_u32_le","pkg_view",0]],["let","plen",["-",["bytes.len","pkg_view"],4]],["set","out",["vec_u8.extend_bytes_range","out","pkg_view",4,"plen"]],["set","i","end"],0],["if",["=","c",91],["begin",["let","pkg",["std.json._parse_array_pack","b","i"]],["if",["bytes.eq","pkg",["std.json._err"]],["return",["std.json._err"]],0],["let","pkg_view",["bytes.view","pkg"]],["let","end",["codec.read_u32_le","pkg_view",0]],["let","plen",["-",["bytes.len","pkg_view"],4]],["set","out",["vec_u8.extend_bytes_range","out","pkg_view",4,"plen"]],["set","i","end"],0],["if",["=","c",34],["begin",["let","start",["+","i",1]],["let","end_quote",["std.json._string_end_or_err","b","start"]],["if",["<","end_quote",0],["return",["std.json._err"]],0],["let","end",["+","end_quote",1]],["let","len",["-","end","i"]],["set","out",["vec_u8.extend_bytes_range","out","b","i","len"]],["set","i","end"],0],["if",["=","c",116],["if",["std.json._match_bytes_at","b","i",["bytes.lit","true"]],["begin",["set","out",["vec_u8.extend_bytes_range","out","b","i",4]],["set","i",["+","i",4]],0],["return",["std.json._err"]]],["if",["=","c",102],["if",["std.json._match_bytes_at","b","i",["bytes.lit","false"]],["begin",["set","out",["vec_u8.extend_bytes_range","out","b","i",5]],["set","i",["+","i",5]],0],["return",["std.json._err"]]],["if",["=","c",110],["if",["std.json._match_bytes_at","b","i",["bytes.lit","null"]],["begin",["set","out",["vec_u8.extend_bytes_range","out","b","i",4]],["set","i",["+","i",4]],0],["return",["std.json._err"]]],["if",["if",["=","c",45],1,["std.json._is_digit","c"]],["begin",["let","end",["std.json._skip_number","b","i"]],["if",["<","end",0],["return",["std.json._err"]],0],["let","len",["-","end","i"]],["set","out",["vec_u8.extend_bytes_range","out","b","i","len"]],["set","i","end"],0],["return",["std.json._err"]]]]]]]]],["set","i",["std.json._skip_ws","b","i"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c2",["bytes.get_u8","b","i"]],["if",["=","c2",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c2",93],["begin",["set","out",["vec_u8.push","out",93]],["let","end",["+","i",1]],["let","out_b",["vec_u8.into_bytes","out"]],["return",["std.json._pack_u32le_prefix","out_b","end"]]],["return",["std.json._err"]]]],0]],["std.json._err"]],"kind":"defn","name":"std.json._parse_array_pack","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["std.json._match_bytes_at","b","off","lit"],["bytes.slice","b","off",["bytes.len","lit"]],["std.json._err"]]],"kind":"defn","name":"std.json._parse_lit","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"},{"name":"lit","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","end",["std.json._skip_number","b","off"]],["if",["<","end",0],["return",["std.json._err"]],0],["bytes.slice","b","off",["-","end","off"]]],"kind":"defn","name":"std.json._parse_number","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],125],["begin",["let","out",["vec_u8.with_capacity",2]],["set","out",["vec_u8.push","out",123]],["set","out",["vec_u8.push","out",125]],["return",["vec_u8.into_bytes","out"]]],0],["let","members",["vec_u8.with_capacity",0]],["let","offsets",["vec_u8.with_capacity",0]],["let","count",0],["for","_",0,["+","n",1],["begin",["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],34],0,["return",["std.json._err"]]],["let","key_start",["+","i",1]],["let","key_end",["std.json._string_end_or_err","b","key_start"]],["if",["<","key_end",0],["return",["std.json._err"]],0],["let","key_len",["-","key_end","key_start"]],["set","i",["+","key_end",1]],["set","i",["std.json._skip_ws","b","i"]],["if",["if",[">=u","i","n"],1,["=",["bytes.get_u8","b","i"],58]],0,["return",["std.json._err"]]],["set","i",["+","i",1]],["let","val",["std.json._parse_value","b","i"]],["if",["bytes.eq","val",["std.json._err"]],["return",["std.json._err"]],0],["let","val_end",["std.json._skip_value","b","i"]],["if",["<","val_end",0],["return",["std.json._err"]],0],["set","i",["std.json._skip_ws","b","val_end"]],["let","m_off",["vec_u8.len","members"]],["set","offsets",["vec_u8.extend_bytes","offsets",["codec.write_u32_le","m_off"]]],["set","members",["vec_u8.extend_bytes","members",["codec.write_u32_le","key_len"]]],["set","members",["vec_u8.extend_bytes_range","members","b","key_start","key_len"]],["let","val_len",["bytes.len","val"]],["set","members",["vec_u8.extend_bytes","members",["codec.write_u32_le","val_len"]]],["set","members",["vec_u8.extend_bytes","members","val"]],["set","count",["+","count",1]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c",125],["begin",["let","members_b",["vec_u8.into_bytes","members"]],["let","offsets_b",["vec_u8.into_bytes","offsets"]],["let","out",["vec_u8.with_capacity",["bytes.len","b"]]],["let","out2",["std.json._emit_object_sorted","members_b","offsets_b","count","out"]],["return",["vec_u8.into_bytes","out2"]]],["return",["std.json._err"]]]],0]],["std.json._err"]],"kind":"defn","name":"std.json._parse_object","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],125],["begin",["let","end",["+","i",1]],["let","out",["vec_u8.with_capacity",6]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",123]],["set","out",["vec_u8.push","out",125]],["let","out_b",["vec_u8.into_bytes","out"]],["return",["std.json._pack_u32le_prefix","out_b","end"]]],0],["let","members",["vec_u8.with_capacity",0]],["let","offsets",["vec_u8.with_capacity",0]],["let","count",0],["for","_",0,["+","n",1],["begin",["if",[">=u","i","n"],["return",["std.json._err"]],0],["if",["=",["bytes.get_u8","b","i"],34],0,["return",["std.json._err"]]],["let","key_start",["+","i",1]],["let","key_end",["std.json._string_end_or_err","b","key_start"]],["if",["<","key_end",0],["return",["std.json._err"]],0],["let","key_len",["-","key_end","key_start"]],["set","i",["+","key_end",1]],["set","i",["std.json._skip_ws","b","i"]],["if",["if",[">=u","i","n"],1,["=",["bytes.get_u8","b","i"],58]],0,["return",["std.json._err"]]],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","val_start","i"],["let","c",["bytes.get_u8","b","i"]],["let","val_len",0],["let","src_tag",0],["let","val_pkg",["bytes.lit",""]],["if",["=","c",123],["begin",["set","val_pkg",["std.json._parse_object_pack","b","i"]],["if",["bytes.eq","val_pkg",["std.json._err"]],["return",["std.json._err"]],0],["let","pkg_view",["bytes.view","val_pkg"]],["let","end",["codec.read_u32_le","pkg_view",0]],["set","val_len",["-",["bytes.len","pkg_view"],4]],["set","src_tag",1],["set","i","end"],0],["if",["=","c",91],["begin",["set","val_pkg",["std.json._parse_array_pack","b","i"]],["if",["bytes.eq","val_pkg",["std.json._err"]],["return",["std.json._err"]],0],["let","pkg_view",["bytes.view","val_pkg"]],["let","end",["codec.read_u32_le","pkg_view",0]],["set","val_len",["-",["bytes.len","pkg_view"],4]],["set","src_tag",1],["set","i","end"],0],["if",["=","c",34],["begin",["let","start",["+","i",1]],["let","end_quote",["std.json._string_end_or_err","b","start"]],["if",["<","end_quote",0],["return",["std.json._err"]],0],["let","end",["+","end_quote",1]],["set","val_len",["-","end","i"]],["set","src_tag",0],["set","i","end"],0],["if",["=","c",116],["if",["std.json._match_bytes_at","b","i",["bytes.lit","true"]],["begin",["set","val_len",4],["set","src_tag",0],["set","i",["+","i",4]],0],["return",["std.json._err"]]],["if",["=","c",102],["if",["std.json._match_bytes_at","b","i",["bytes.lit","false"]],["begin",["set","val_len",5],["set","src_tag",0],["set","i",["+","i",5]],0],["return",["std.json._err"]]],["if",["=","c",110],["if",["std.json._match_bytes_at","b","i",["bytes.lit","null"]],["begin",["set","val_len",4],["set","src_tag",0],["set","i",["+","i",4]],0],["return",["std.json._err"]]],["if",["if",["=","c",45],1,["std.json._is_digit","c"]],["begin",["let","end",["std.json._skip_number","b","i"]],["if",["<","end",0],["return",["std.json._err"]],0],["set","val_len",["-","end","i"]],["set","src_tag",0],["set","i","end"],0],["return",["std.json._err"]]]]]]]]],["set","i",["std.json._skip_ws","b","i"]],["let","m_off",["vec_u8.len","members"]],["set","offsets",["vec_u8.extend_bytes","offsets",["codec.write_u32_le","m_off"]]],["set","members",["vec_u8.extend_bytes","members",["codec.write_u32_le","key_len"]]],["set","members",["vec_u8.extend_bytes_range","members","b","key_start","key_len"]],["set","members",["vec_u8.extend_bytes","members",["codec.write_u32_le","val_len"]]],["if",["=","src_tag",1],["set","members",["vec_u8.extend_bytes_range","members",["bytes.view","val_pkg"],4,"val_len"]],["set","members",["vec_u8.extend_bytes_range","members","b","val_start","val_len"]]],["set","count",["+","count",1]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c2",["bytes.get_u8","b","i"]],["if",["=","c2",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c2",125],["begin",["let","end",["+","i",1]],["let","members_b",["vec_u8.into_bytes","members"]],["let","offsets_b",["vec_u8.into_bytes","offsets"]],["let","out",["vec_u8.with_capacity",["+",["bytes.len","b"],4]]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.push","out",0]],["let","out2",["std.json._emit_object_sorted","members_b","offsets_b","count","out"]],["let","out_b",["vec_u8.into_bytes","out2"]],["return",["std.json._pack_u32le_prefix","out_b","end"]]],["return",["std.json._err"]]]],0]],["std.json._err"]],"kind":"defn","name":"std.json._parse_object_pack","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","start",["+","off",1]],["let","end_quote",["std.json._string_end_or_err","b","start"]],["if",["<","end_quote",0],["return",["std.json._err"]],0],["bytes.slice","b","off",["+",["-","end_quote","off"],1]]],"kind":"defn","name":"std.json._parse_string","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b","off"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",123],["std.json._parse_object","b","i"],["if",["=","c",91],["std.json._parse_array","b","i"],["if",["=","c",34],["std.json._parse_string","b","i"],["if",["=","c",116],["std.json._parse_lit","b","i",["bytes.lit","true"]],["if",["=","c",102],["std.json._parse_lit","b","i",["bytes.lit","false"]],["if",["=","c",110],["std.json._parse_lit","b","i",["bytes.lit","null"]],["if",["if",["=","c",45],1,["std.json._is_digit","c"]],["std.json._parse_number","b","i"],["std.json._err"]]]]]]]]],"kind":"defn","name":"std.json._parse_value","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b","off"]],["if",[">=u","i","n"],["return",["std.json._err"]],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",123],["std.json._parse_object_pack","b","i"],["if",["=","c",91],["std.json._parse_array_pack","b","i"],["if",["=","c",34],["begin",["let","start",["+","i",1]],["let","end_quote",["std.json._string_end_or_err","b","start"]],["if",["<","end_quote",0],["return",["std.json._err"]],0],["let","end",["+","end_quote",1]],["let","len",["-","end","i"]],["std.json._pack_range","b","i","len","end"]],["if",["=","c",116],["if",["std.json._match_bytes_at","b","i",["bytes.lit","true"]],["std.json._pack_range","b","i",4,["+","i",4]],["std.json._err"]],["if",["=","c",102],["if",["std.json._match_bytes_at","b","i",["bytes.lit","false"]],["std.json._pack_range","b","i",5,["+","i",5]],["std.json._err"]],["if",["=","c",110],["if",["std.json._match_bytes_at","b","i",["bytes.lit","null"]],["std.json._pack_range","b","i",4,["+","i",4]],["std.json._err"]],["if",["if",["=","c",45],1,["std.json._is_digit","c"]],["begin",["let","end",["std.json._skip_number","b","i"]],["if",["<","end",0],["return",["std.json._err"]],0],["let","len",["-","end","i"]],["std.json._pack_range","b","i","len","end"]],["std.json._err"]]]]]]]]],"kind":"defn","name":"std.json._parse_value_pack","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","off",0],["for","i",0,["+","idx",1],["begin",["let","len",["codec.read_u32_le","segs","off"]],["let","start",["+","off",4]],["if",["=","i","idx"],["return",["view.slice","segs","start","len"]],["set","off",["+","start","len"]]],0]],["view.slice","segs",0,0]],"kind":"defn","name":"std.json._segment_at","params":[{"name":"segs","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"bytes_view"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",-1],0],["if",["=",["bytes.get_u8","b","i"],93],["return",["+","i",1]],0],["for","_",0,["+","n",1],["begin",["set","i",["std.json._skip_value","b","i"]],["if",["<","i",0],["return",-1],0],["set","i",["std.json._skip_ws","b","i"]],["if",[">=u","i","n"],["return",-1],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c",93],["return",["+","i",1]],["return",-1]]],0]],-1],"kind":"defn","name":"std.json._skip_array","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["std.json._match_bytes_at","b","off","lit"],["+","off",["bytes.len","lit"]],-1]],"kind":"defn","name":"std.json._skip_lit","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"},{"name":"lit","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i","off"],["if",["=",["bytes.get_u8","b","i"],45],["begin",["set","i",["+","i",1]],["if",[">=u","i","n"],["return",-1],0]],0],["if",[">=u","i","n"],["return",-1],0],["let","d0",["bytes.get_u8","b","i"]],["if",["=",["std.json._is_digit","d0"],0],["return",-1],0],["if",["=","d0",48],["begin",["set","i",["+","i",1]],["if",["if",["<u","i","n"],["std.json._is_digit",["bytes.get_u8","b","i"]],0],["return",-1],0]],["begin",["set","i",["+","i",1]],["let","done",0],["for","_",0,"n",["begin",["if","done",0,["if",[">=u","i","n"],["set","done",1],["if",["std.json._is_digit",["bytes.get_u8","b","i"]],["set","i",["+","i",1]],["set","done",1]]]],0]]]],"i"],"kind":"defn","name":"std.json._skip_number","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b",["+","off",1]]],["if",[">=u","i","n"],["return",-1],0],["if",["=",["bytes.get_u8","b","i"],125],["return",["+","i",1]],0],["for","_",0,["+","n",1],["begin",["if",[">=u","i","n"],["return",-1],0],["if",["=",["bytes.get_u8","b","i"],34],0,["return",-1]],["let","key_end",["std.json._string_end_or_err","b",["+","i",1]]],["if",["<","key_end",0],["return",-1],0],["set","i",["+","key_end",1]],["set","i",["std.json._skip_ws","b","i"]],["if",["if",[">=u","i","n"],1,["=",["bytes.get_u8","b","i"],58]],0,["return",-1]],["set","i",["+","i",1]],["set","i",["std.json._skip_value","b","i"]],["if",["<","i",0],["return",-1],0],["set","i",["std.json._skip_ws","b","i"]],["if",[">=u","i","n"],["return",-1],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",44],["set","i",["std.json._skip_ws","b",["+","i",1]]],["if",["=","c",125],["return",["+","i",1]],["return",-1]]],0]],-1],"kind":"defn","name":"std.json._skip_object","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","end_quote",["std.json._string_end_or_err","b",["+","off",1]]],["if",["<","end_quote",0],-1,["+","end_quote",1]]],"kind":"defn","name":"std.json._skip_string","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["let","i",["std.json._skip_ws","b","off"]],["if",[">=u","i","n"],["return",-1],0],["let","c",["bytes.get_u8","b","i"]],["if",["=","c",123],["std.json._skip_object","b","i"],["if",["=","c",91],["std.json._skip_array","b","i"],["if",["=","c",34],["std.json._skip_string","b","i"],["if",["=","c",116],["std.json._skip_lit","b","i",["bytes.lit","true"]],["if",["=","c",102],["std.json._skip_lit","b","i",["bytes.lit","false"]],["if",["=","c",110],["std.json._skip_lit","b","i",["bytes.lit","null"]],["if",["if",["=","c",45],1,["std.json._is_digit","c"]],["std.json._skip_number","b","i"],-1]]]]]]]],"kind":"defn","name":"std.json._skip_value","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["for","i","off","n",["begin",["let","c",["bytes.get_u8","b","i"]],["if",["std.json._is_ws","c"],0,["return","i"]]]],"n"],"kind":"defn","name":"std.json._skip_ws","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["for","i","start","n",["begin",["let","c",["bytes.get_u8","b","i"]],["if",["=","c",34],["return","i"],0],["if",["=","c",92],["return",-1],0],["if",["<u","c",32],["return",-1],0],0]],-1],"kind":"defn","name":"std.json._string_end_or_err","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","pkg",["std.json._parse_value_pack","b",0]],["if",["bytes.eq","pkg",["std.json._err"]],["return",["std.json._err"]],0],["let","pkg_view",["bytes.view","pkg"]],["let","end",["codec.read_u32_le","pkg_view",0]],["let","end2",["std.json._skip_ws","b","end"]],["if",["=","end2",["bytes.len","b"]],["bytes.slice","pkg_view",4,["-",["bytes.len","pkg_view"],4]],["std.json._err"]]],"kind":"defn","name":"std.json.canonicalize_small","params":[{"name":"b","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","nul",["std.json._find_byte","b",0]],["if",["<","nul",0],["return",["std.json._err"]],0],["let","json",["view.slice","b",0,"nul"]],["let","path",["view.slice","b",["+","nul",1],["-",["bytes.len","b"],["+","nul",1]]]],["let","path_len",["bytes.len","path"]],["if",["=","path_len",0],["return",["std.json._err"]],0],["let","segs_vec",["vec_u8.with_capacity",["+","path_len",4]]],["let","seg_start",0],["let","seg_count",0],["for","i",0,"path_len",["begin",["if",["=",["bytes.get_u8","path","i"],46],["begin",["let","seg_len",["-","i","seg_start"]],["if",["=","seg_len",0],["return",["std.json._err"]],0],["set","segs_vec",["vec_u8.extend_bytes","segs_vec",["codec.write_u32_le","seg_len"]]],["set","segs_vec",["vec_u8.extend_bytes_range","segs_vec","path","seg_start","seg_len"]],["set","seg_count",["+","seg_count",1]],["set","seg_start",["+","i",1]]],0],0]],["let","seg_len",["-","path_len","seg_start"]],["if",["=","seg_len",0],["return",["std.json._err"]],0],["set","segs_vec",["vec_u8.extend_bytes","segs_vec",["codec.write_u32_le","seg_len"]]],["set","segs_vec",["vec_u8.extend_bytes_range","segs_vec","path","seg_start","seg_len"]],["set","seg_count",["+","seg_count",1]],["let","segs",["vec_u8.into_bytes","segs_vec"]],["let","extracted",["std.json._extract_from_value","json",0,"segs",0,"seg_count"]],["if",["bytes.eq","extracted",["std.json._err"]],["return",["std.json._err"]],0],["let","root_end",["std.json._skip_value","json",0]],["if",["<","root_end",0],["return",["std.json._err"]],0],["let","root_end2",["std.json._skip_ws","json","root_end"]],["if",["=","root_end2",["bytes.len","json"]],"extracted",["std.json._err"]]],"kind":"defn","name":"std.json.extract_path_canon_or_err","params":[{"name":"b","ty":"bytes_view"}],"result":"bytes"}],"imports":[],"kind":"module","module_id":"std.json","schema_version":"x07.x07ast@0.3.0"}
