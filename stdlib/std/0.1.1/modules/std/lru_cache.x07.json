{"decls":[{"kind":"export","names":["std.lru_cache.len_u32","std.lru_cache.new_u32","std.lru_cache.peek_u32_opt","std.lru_cache.peek_u32_or","std.lru_cache.put_u32","std.lru_cache.touch_u32"]},{"body":["std.u32.read_le_at","c",["std.lru_cache._slot_off","base","idx"]],"kind":"defn","name":"std.lru_cache._arr_get","params":[{"name":"c","ty":"bytes_view"},{"name":"base","ty":"i32"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["std.u32.write_le_at","c",["std.lru_cache._slot_off","base","idx"],"v"],"kind":"defn","name":"std.lru_cache._arr_set","params":[{"name":"c","ty":"bytes"},{"name":"base","ty":"i32"},{"name":"idx","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"},{"body":["std.u32.read_le_at","c",0],"kind":"defn","name":"std.lru_cache._cap","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","head",["std.lru_cache._head","c"]],["let","tail",["std.lru_cache._tail","c"]],["let","prev_base",["std.lru_cache._prev_base","c"]],["let","next_base",["std.lru_cache._next_base","c"]],["let","prev",["std.lru_cache._arr_get","c","prev_base","idx"]],["let","next",["std.lru_cache._arr_get","c","next_base","idx"]],["if",["=","prev",0],["set","head","next"],["set","c",["std.lru_cache._arr_set","c","next_base","prev","next"]]],["if",["=","next",0],["set","tail","prev"],["set","c",["std.lru_cache._arr_set","c","prev_base","next","prev"]]],["set","c",["std.lru_cache._arr_set","c","prev_base","idx",0]],["set","c",["std.lru_cache._arr_set","c","next_base","idx",0]],["set","c",["std.u32.write_le_at","c",8,"head"]],["set","c",["std.u32.write_le_at","c",12,"tail"]],"c"],"kind":"defn","name":"std.lru_cache._detach","params":[{"name":"c","ty":"bytes"},{"name":"idx","ty":"i32"}],"result":"bytes"},{"body":["std.u32.read_le_at","c",20],"kind":"defn","name":"std.lru_cache._free_head","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","c",8],"kind":"defn","name":"std.lru_cache._head","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","head",["std.lru_cache._head","c"]],["let","tail",["std.lru_cache._tail","c"]],["let","prev_base",["std.lru_cache._prev_base","c"]],["let","next_base",["std.lru_cache._next_base","c"]],["set","c",["std.lru_cache._arr_set","c","prev_base","idx",0]],["set","c",["std.lru_cache._arr_set","c","next_base","idx","head"]],["if",["=","head",0],["set","tail","idx"],["set","c",["std.lru_cache._arr_set","c","prev_base","head","idx"]]],["set","head","idx"],["set","c",["std.u32.write_le_at","c",8,"head"]],["set","c",["std.u32.write_le_at","c",12,"tail"]],"c"],"kind":"defn","name":"std.lru_cache._insert_front","params":[{"name":"c","ty":"bytes"},{"name":"idx","ty":"i32"}],"result":"bytes"},{"body":["+",["std.lru_cache._next_free_base","c"],["*",["std.lru_cache._cap","c"],4]],"kind":"defn","name":"std.lru_cache._keys_base","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","c",16],"kind":"defn","name":"std.lru_cache._map","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","head",["std.lru_cache._head","c"]],["if",["=","idx","head"],["return","c"],0],["set","c",["std.lru_cache._detach","c","idx"]],["set","c",["std.lru_cache._insert_front","c","idx"]],"c"],"kind":"defn","name":"std.lru_cache._move_to_front","params":[{"name":"c","ty":"bytes"},{"name":"idx","ty":"i32"}],"result":"bytes"},{"body":["+",["std.lru_cache._prev_base","c"],["*",["std.lru_cache._cap","c"],4]],"kind":"defn","name":"std.lru_cache._next_base","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":24,"kind":"defn","name":"std.lru_cache._next_free_base","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["+",["std.lru_cache._vals_base","c"],["*",["std.lru_cache._cap","c"],4]],"kind":"defn","name":"std.lru_cache._prev_base","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["+","base",["*",["-","idx",1],4]],"kind":"defn","name":"std.lru_cache._slot_off","params":[{"name":"base","ty":"i32"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["std.u32.read_le_at","c",12],"kind":"defn","name":"std.lru_cache._tail","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["+",["std.lru_cache._keys_base","c"],["*",["std.lru_cache._cap","c"],4]],"kind":"defn","name":"std.lru_cache._vals_base","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","c",4],"kind":"defn","name":"std.lru_cache.len_u32","params":[{"name":"c","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","cap2",["if",["<","cap",0],0,"cap"]],["let","total",["+",24,["*","cap2",20]]],["let","out",["bytes.alloc","total"]],["set","out",["std.u32.write_le_at","out",0,"cap2"]],["set","out",["std.u32.write_le_at","out",4,0]],["set","out",["std.u32.write_le_at","out",8,0]],["set","out",["std.u32.write_le_at","out",12,0]],["let","map_cap",["std.u32.pow2_ceil",["if",["<u",["*","cap2",4],8],8,["*","cap2",4]]]],["let","map_h",["map_u32.new","map_cap"]],["set","out",["std.u32.write_le_at","out",16,"map_h"]],["set","out",["std.u32.write_le_at","out",20,["if",["=","cap2",0],0,1]]],["let","next_free_base",["std.lru_cache._next_free_base","out"]],["let","keys_base",["std.lru_cache._keys_base","out"]],["let","vals_base",["std.lru_cache._vals_base","out"]],["let","prev_base",["std.lru_cache._prev_base","out"]],["let","next_base",["std.lru_cache._next_base","out"]],["for","i",0,"cap2",["begin",["let","idx",["+","i",1]],["let","nf",["if",["=","idx","cap2"],0,["+","idx",1]]],["set","out",["std.u32.write_le_at","out",["+","next_free_base",["*","i",4]],"nf"]],["set","out",["std.u32.write_le_at","out",["+","keys_base",["*","i",4]],0]],["set","out",["std.u32.write_le_at","out",["+","vals_base",["*","i",4]],0]],["set","out",["std.u32.write_le_at","out",["+","prev_base",["*","i",4]],0]],["set","out",["std.u32.write_le_at","out",["+","next_base",["*","i",4]],0]],0]],"out"],"kind":"defn","name":"std.lru_cache.new_u32","params":[{"name":"cap","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","m",["std.lru_cache._map","c"]],["let","idx",["map_u32.get","m","key",0]],["if",["=","idx",0],["return",["option_i32.none"]],0],["let","v",["std.lru_cache._arr_get","c",["std.lru_cache._vals_base","c"],"idx"]],["option_i32.some","v"]],"kind":"defn","name":"std.lru_cache.peek_u32_opt","params":[{"name":"c","ty":"bytes_view"},{"name":"key","ty":"i32"}],"result":"option_i32"},{"body":["option_i32.unwrap_or",["std.lru_cache.peek_u32_opt","c","key"],"default"],"kind":"defn","name":"std.lru_cache.peek_u32_or","params":[{"name":"c","ty":"bytes_view"},{"name":"key","ty":"i32"},{"name":"default","ty":"i32"}],"result":"i32"},{"body":["begin",["let","cap",["std.lru_cache._cap","c"]],["if",["=","cap",0],["return","c"],0],["let","m",["std.lru_cache._map","c"]],["let","keys_base",["std.lru_cache._keys_base","c"]],["let","vals_base",["std.lru_cache._vals_base","c"]],["let","next_free_base",["std.lru_cache._next_free_base","c"]],["let","idx",["map_u32.get","m","key",0]],["if",["=","idx",0],0,["begin",["set","c",["std.lru_cache._arr_set","c","vals_base","idx","val"]],["set","c",["std.lru_cache._move_to_front","c","idx"]],["return","c"]]],["let","len",["std.lru_cache.len_u32","c"]],["if",["<u","len","cap"],["begin",["set","idx",["std.lru_cache._free_head","c"]],["let","nf",["std.lru_cache._arr_get","c","next_free_base","idx"]],["set","c",["std.u32.write_le_at","c",20,"nf"]],["set","c",["std.u32.write_le_at","c",4,["+","len",1]]],0],["begin",["set","idx",["std.lru_cache._tail","c"]],["let","evict_key",["std.lru_cache._arr_get","c","keys_base","idx"]],["map_u32.remove","m","evict_key"],["set","c",["std.lru_cache._detach","c","idx"]],0]],["set","c",["std.lru_cache._arr_set","c","keys_base","idx","key"]],["set","c",["std.lru_cache._arr_set","c","vals_base","idx","val"]],["set","c",["std.lru_cache._insert_front","c","idx"]],["map_u32.set","m","key","idx"],"c"],"kind":"defn","name":"std.lru_cache.put_u32","params":[{"name":"c","ty":"bytes"},{"name":"key","ty":"i32"},{"name":"val","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","cap",["std.lru_cache._cap","c"]],["if",["=","cap",0],["return","c"],0],["let","m",["std.lru_cache._map","c"]],["let","idx",["map_u32.get","m","key",0]],["if",["=","idx",0],["return","c"],0],["set","c",["std.lru_cache._move_to_front","c","idx"]],"c"],"kind":"defn","name":"std.lru_cache.touch_u32","params":[{"name":"c","ty":"bytes"},{"name":"key","ty":"i32"}],"result":"bytes"}],"imports":["std.u32"],"kind":"module","module_id":"std.lru_cache","schema_version":"x07.x07ast@0.1.0"}
