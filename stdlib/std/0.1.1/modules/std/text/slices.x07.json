{"decls":[{"kind":"export","names":["std.text.slices.builder_finish_v1","std.text.slices.builder_new_v1","std.text.slices.builder_push_v1","std.text.slices.copy_at_v1","std.text.slices.count_v1","std.text.slices.len_v1","std.text.slices.start_v1","std.text.slices.validate_v1","std.text.slices.view_at_v1"]},{"body":["begin",["set","out",["std.u32.write_le_at_vec_u8","out",8,"count"]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.text.slices.builder_finish_v1","params":[{"name":"out","ty":"vec_u8"},{"name":"count","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","hint",["if",["<","cap_hint",0],0,"cap_hint"]],["let","cap",["+",12,["*","hint",8]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.extend_bytes","out",["bytes.lit","X7SL"]]],["set","out",["std.u32.push_le","out",1]],["set","out",["std.u32.push_le","out",0]],"out"],"kind":"defn","name":"std.text.slices.builder_new_v1","params":[{"name":"cap_hint","ty":"i32"}],"result":"vec_u8"},{"body":["begin",["set","out",["std.u32.push_le","out","start"]],["set","out",["std.u32.push_le","out","len"]],"out"],"kind":"defn","name":"std.text.slices.builder_push_v1","params":[{"name":"out","ty":"vec_u8"},{"name":"start","ty":"i32"},{"name":"len","ty":"i32"}],"result":"vec_u8"},{"body":["view.to_bytes",["std.text.slices.view_at_v1","base","x7sl","idx"]],"kind":"defn","name":"std.text.slices.copy_at_v1","params":[{"name":"base","ty":"bytes_view"},{"name":"x7sl","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"bytes"},{"body":["result_i32.unwrap_or",["std.text.slices.validate_v1","x7sl"],-1],"kind":"defn","name":"std.text.slices.count_v1","params":[{"name":"x7sl","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","count",["std.text.slices.count_v1","x7sl"]],["if",["<","count",0],["return",0],0],["if",["<","idx",0],["return",0],0],["if",["<u","idx","count"],0,["return",0]],["let","off",["+",16,["*","idx",8]]],["std.u32.read_le_at","x7sl","off"]],"kind":"defn","name":"std.text.slices.len_v1","params":[{"name":"x7sl","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["begin",["let","count",["std.text.slices.count_v1","x7sl"]],["if",["<","count",0],["return",0],0],["if",["<","idx",0],["return",0],0],["if",["<u","idx","count"],0,["return",0]],["let","off",["+",12,["*","idx",8]]],["std.u32.read_le_at","x7sl","off"]],"kind":"defn","name":"std.text.slices.start_v1","params":[{"name":"x7sl","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","x7sl"]],["if",["<u","n",12],["return",["result_i32.err",2119237633]],0],["if",["=",["view.get_u8","x7sl",0],88],0,["return",["result_i32.err",2119237636]]],["if",["=",["view.get_u8","x7sl",1],55],0,["return",["result_i32.err",2119237636]]],["if",["=",["view.get_u8","x7sl",2],83],0,["return",["result_i32.err",2119237636]]],["if",["=",["view.get_u8","x7sl",3],76],0,["return",["result_i32.err",2119237636]]],["let","ver",["std.u32.read_le_at","x7sl",4]],["if",["=","ver",1],0,["return",["result_i32.err",2119237634]]],["let","count",["std.u32.read_le_at","x7sl",8]],["let","expected",["+",12,["*","count",8]]],["if",["=","n","expected"],["result_i32.ok","count"],["result_i32.err",2119237635]]],"kind":"defn","name":"std.text.slices.validate_v1","params":[{"name":"x7sl","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","base_len",["view.len","base"]],["let","count",["std.text.slices.count_v1","x7sl"]],["if",["<","count",0],["return",["view.slice","base","base_len",0]],0],["if",["<","idx",0],["return",["view.slice","base","base_len",0]],0],["if",["<u","idx","count"],0,["return",["view.slice","base","base_len",0]]],["let","off",["+",12,["*","idx",8]]],["let","start",["std.u32.read_le_at","x7sl","off"]],["let","len",["std.u32.read_le_at","x7sl",["+","off",4]]],["if",[">=u","start","base_len"],["return",["view.slice","base","base_len",0]],0],["let","max_len",["-","base_len","start"]],["let","len0",["if",["<u","len","max_len"],"len","max_len"]],["view.slice","base","start","len0"]],"kind":"defn","name":"std.text.slices.view_at_v1","params":[{"name":"base","ty":"bytes_view"},{"name":"x7sl","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"bytes_view"}],"imports":["std.u32"],"kind":"module","module_id":"std.text.slices","schema_version":"x07.x07ast@0.1.0"}
