{"decls":[{"kind":"export","names":["std.hash_set.add_u32","std.hash_set.contains_u32","std.hash_set.emit_u32le","std.hash_set.len_u32","std.hash_set.new_u32","std.hash_set.view_contains","std.hash_set.view_insert","std.hash_set.view_len","std.hash_set.view_new"]},{"body":["std.u32.read_le_at","set",["+",["std.hash_set._entry_off","idx"],4]],"kind":"defn","name":"std.hash_set._entry_len","params":[{"name":"set","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["std.u32.read_le_at","set",["+",["std.hash_set._entry_off","idx"],8]],"kind":"defn","name":"std.hash_set._entry_next","params":[{"name":"set","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["+",12,["*",["-","idx",1],12]],"kind":"defn","name":"std.hash_set._entry_off","params":[{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["begin",["set","set",["std.u32.write_le_at_vec_u8","set",["+",["std.hash_set._entry_off","idx"],8],"next_idx"]],"set"],"kind":"defn","name":"std.hash_set._entry_set_next","params":[{"name":"set","ty":"vec_u8"},{"name":"idx","ty":"i32"},{"name":"next_idx","ty":"i32"}],"result":"vec_u8"},{"body":["std.u32.read_le_at","set",["std.hash_set._entry_off","idx"]],"kind":"defn","name":"std.hash_set._entry_start","params":[{"name":"set","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":"i32"},{"body":["if",["=","h",-1],-2,"h"],"kind":"defn","name":"std.hash_set._fix_bucket_key","params":[{"name":"h","ty":"i32"}],"result":"i32"},{"body":["begin",["let","new_handle",["map_u32.new","new_cap"]],["let","len",["std.hash_set._view_len","set"]],["set","set",["std.hash_set._view_set_header","set","new_handle","new_cap","len"]],["for","idx",1,["+","len",1],["begin",["let","start",["std.hash_set._entry_start","set","idx"]],["let","n",["std.hash_set._entry_len","set","idx"]],["let","hash",["std.hash_set._fix_bucket_key",["std.hash.fnv1a32_range","base","start","n"]]],["let","head",["map_u32.get","new_handle","hash",0]],["set","set",["std.hash_set._entry_set_next","set","idx","head"]],["map_u32.set","new_handle","hash","idx"],0]],"set"],"kind":"defn","name":"std.hash_set._rehash_view","params":[{"name":"set","ty":"vec_u8"},{"name":"base","ty":"bytes_view"},{"name":"new_cap","ty":"i32"}],"result":"vec_u8"},{"body":["std.u32.read_le_at","set",4],"kind":"defn","name":"std.hash_set._view_cap","params":[{"name":"set","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","set",0],"kind":"defn","name":"std.hash_set._view_handle","params":[{"name":"set","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","set",8],"kind":"defn","name":"std.hash_set._view_len","params":[{"name":"set","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["set","set",["std.u32.write_le_at_vec_u8","set",0,"handle"]],["set","set",["std.u32.write_le_at_vec_u8","set",4,"cap"]],["set","set",["std.u32.write_le_at_vec_u8","set",8,"len"]],"set"],"kind":"defn","name":"std.hash_set._view_set_header","params":[{"name":"set","ty":"vec_u8"},{"name":"handle","ty":"i32"},{"name":"cap","ty":"i32"},{"name":"len","ty":"i32"}],"result":"vec_u8"},{"body":["set_u32.add","s","key"],"kind":"defn","name":"std.hash_set.add_u32","params":[{"name":"s","ty":"i32"},{"name":"key","ty":"i32"}],"result":"i32"},{"body":["set_u32.contains","s","key"],"kind":"defn","name":"std.hash_set.contains_u32","params":[{"name":"s","ty":"i32"},{"name":"key","ty":"i32"}],"result":"i32"},{"body":["begin",["let","raw",["set_u32.dump_u32le","s"]],["let","n",["bytes.len","raw"]],["let","count",[">>u","n",2]],["let","t",["std.btree_set.empty_u32"]],["for","i",0,"count",["begin",["let","off",["*","i",4]],["let","k",["std.u32.read_le_at","raw","off"]],["set","t",["std.btree_set.insert_u32","t","k"]],0]],["std.btree_set.emit_u32le","t"]],"kind":"defn","name":"std.hash_set.emit_u32le","params":[{"name":"s","ty":"i32"}],"result":"bytes"},{"body":["map_u32.len","s"],"kind":"defn","name":"std.hash_set.len_u32","params":[{"name":"s","ty":"i32"}],"result":"i32"},{"body":["set_u32.new","cap_pow2"],"kind":"defn","name":"std.hash_set.new_u32","params":[{"name":"cap_pow2","ty":"i32"}],"result":"i32"},{"body":["begin",["let","h",["std.hash_set._view_handle","set"]],["let","hash",["std.hash_set._fix_bucket_key",["std.hash.fnv1a32_range","base","start","len"]]],["let","cur",["map_u32.get","h","hash",0]],["for","_",0,["+",["std.hash_set._view_len","set"],1],["begin",["if",["=","cur",0],["return",0],0],["let","s2",["std.hash_set._entry_start","set","cur"]],["let","l2",["std.hash_set._entry_len","set","cur"]],["if",["if",["=","l2","len"],["=",["bytes.cmp_range","base","start","len","base","s2","l2"],0],0],["return",1],0],["set","cur",["std.hash_set._entry_next","set","cur"]],0]],0],"kind":"defn","name":"std.hash_set.view_contains","params":[{"name":"set","ty":"bytes_view"},{"name":"base","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"len","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["=",["std.hash_set.view_contains","set","base","start","len"],1],["return","set"],0],["let","cap",["std.hash_set._view_cap","set"]],["let","cur_len",["std.hash_set._view_len","set"]],["if",[">=u",["*",["+","cur_len",1],2],"cap"],["begin",["set","cap",["*","cap",2]],["set","set",["std.hash_set._rehash_view","set","base","cap"]],0],0],["let","h",["std.hash_set._view_handle","set"]],["let","hash",["std.hash_set._fix_bucket_key",["std.hash.fnv1a32_range","base","start","len"]]],["let","head",["map_u32.get","h","hash",0]],["let","idx",["+","cur_len",1]],["set","set",["vec_u8.extend_zeroes","set",12]],["set","set",["std.u32.write_le_at_vec_u8","set",["std.hash_set._entry_off","idx"],"start"]],["set","set",["std.u32.write_le_at_vec_u8","set",["+",["std.hash_set._entry_off","idx"],4],"len"]],["set","set",["std.u32.write_le_at_vec_u8","set",["+",["std.hash_set._entry_off","idx"],8],"head"]],["map_u32.set","h","hash","idx"],["std.hash_set._view_set_header","set","h","cap","idx"]],"kind":"defn","name":"std.hash_set.view_insert","params":[{"name":"set","ty":"vec_u8"},{"name":"base","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"len","ty":"i32"}],"result":"vec_u8"},{"body":["std.hash_set._view_len","set"],"kind":"defn","name":"std.hash_set.view_len","params":[{"name":"set","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","need",["if",["<","expected_len",0],0,"expected_len"]],["set","need",["*","need",2]],["if",["<u","need",8],["set","need",8],0],["let","cap",["std.u32.pow2_ceil","need"]],["let","handle",["map_u32.new","cap"]],["let","entries_cap",[">>u","cap",1]],["let","v",["vec_u8.with_capacity",["+",12,["*","entries_cap",12]]]],["set","v",["vec_u8.extend_zeroes","v",12]],["std.hash_set._view_set_header","v","handle","cap",0]],"kind":"defn","name":"std.hash_set.view_new","params":[{"name":"expected_len","ty":"i32"}],"result":"vec_u8"}],"imports":["std.btree_set","std.hash","std.u32"],"kind":"module","module_id":"std.hash_set","schema_version":"x07.x07ast@0.1.0"}
