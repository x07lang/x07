{"decls":[{"kind":"export","names":["std.heap.emit_le","std.heap.len","std.heap.min_or","std.heap.pop_min","std.heap.push","std.heap.with_capacity"]},{"body":["std.u32.read_le_at","h",0],"kind":"defn","name":"std.heap._cap","params":[{"name":"h","ty":"bytes_view"}],"result":"i32"},{"body":["ty.read_le_at",["t","A"],"h",["tapp","std.heap._item_off",["t","A"],"idx"]],"kind":"defn","name":"std.heap._get","params":[{"name":"h","ty":"bytes_view"},{"name":"idx","ty":"i32"}],"result":["t","A"],"type_params":[{"bound":"orderable","name":"A"}]},{"body":["begin",["let","out",["tapp","std.heap.with_capacity",["t","A"],"new_cap"]],["set","out",["bytes.copy","h","out"]],["set","out",["std.u32.write_le_at","out",0,"new_cap"]],"out"],"kind":"defn","name":"std.heap._grow","params":[{"name":"h","ty":"bytes"},{"name":"new_cap","ty":"i32"}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]},{"body":["+",8,["*","idx",["ty.size_bytes",["t","A"]]]],"kind":"defn","name":"std.heap._item_off","params":[{"name":"idx","ty":"i32"}],"result":"i32","type_params":[{"bound":"orderable","name":"A"}]},{"body":["ty.write_le_at",["t","A"],"h",["tapp","std.heap._item_off",["t","A"],"idx"],"x"],"kind":"defn","name":"std.heap._set","params":[{"name":"h","ty":"bytes"},{"name":"idx","ty":"i32"},{"name":"x","ty":["t","A"]}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]},{"body":["begin",["let","n",["std.heap.len","h"]],["let","esz",["ty.size_bytes",["t","A"]]],["let","out",["vec_u8.with_capacity",["*","n","esz"]]],["for","i",0,"n",["begin",["set","out",["ty.push_le",["t","A"],"out",["tapp","std.heap._get",["t","A"],"h",0]]],["set","h",["tapp","std.heap.pop_min",["t","A"],"h"]],0]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.heap.emit_le","params":[{"name":"h","ty":"bytes"}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]},{"body":["std.u32.read_le_at","h",4],"kind":"defn","name":"std.heap.len","params":[{"name":"h","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","len",["std.heap.len","h"]],["if",["=","len",0],["return","default"],0],["tapp","std.heap._get",["t","A"],"h",0]],"kind":"defn","name":"std.heap.min_or","params":[{"name":"h","ty":"bytes_view"},{"name":"default","ty":["t","A"]}],"result":["t","A"],"type_params":[{"bound":"orderable","name":"A"}]},{"body":["begin",["let","len",["std.heap.len","h"]],["if",["=","len",0],["return","h"],0],["set","len",["-","len",1]],["set","h",["std.u32.write_le_at","h",4,"len"]],["if",["=","len",0],["return","h"],0],["let","v",["tapp","std.heap._get",["t","A"],"h","len"]],["let","idx",0],["let","done",0],["for","_",0,32,["begin",["if",["=","done",0],["begin",["let","left",["+",["*","idx",2],1]],["if",[">=u","left","len"],["set","done",1],["begin",["let","child","left"],["let","child_val",["tapp","std.heap._get",["t","A"],"h","left"]],["let","right",["+","left",1]],["if",["<u","right","len"],["begin",["let","rv",["tapp","std.heap._get",["t","A"],"h","right"]],["if",["<",["ty.cmp",["t","A"],"rv","child_val"],0],["begin",["set","child","right"],["set","child_val","rv"]],0],0],0],["if",["<",["ty.cmp",["t","A"],"child_val","v"],0],["begin",["set","h",["tapp","std.heap._set",["t","A"],"h","idx","child_val"]],["set","idx","child"]],["set","done",1]],0]],0],0],0]],["set","h",["tapp","std.heap._set",["t","A"],"h","idx","v"]],"h"],"kind":"defn","name":"std.heap.pop_min","params":[{"name":"h","ty":"bytes"}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]},{"body":["begin",["let","cap",["std.heap._cap","h"]],["let","len",["std.heap.len","h"]],["if",[">=u","len","cap"],["begin",["set","h",["tapp","std.heap._grow",["t","A"],"h",["if",["<","cap",1],1,["*","cap",2]]]],["set","cap",["std.heap._cap","h"]],0],0],["set","h",["tapp","std.heap._set",["t","A"],"h","len","x"]],["set","len",["+","len",1]],["set","h",["std.u32.write_le_at","h",4,"len"]],["let","idx",["-","len",1]],["let","v","x"],["let","done",0],["for","_",0,32,["begin",["if",["=","done",1],0,["begin",["if",["=","idx",0],["set","done",1],0],["if",["=","done",0],["begin",["let","p",[">>u",["-","idx",1],1]],["let","pv",["tapp","std.heap._get",["t","A"],"h","p"]],["if",["<",["ty.cmp",["t","A"],"v","pv"],0],["begin",["set","h",["tapp","std.heap._set",["t","A"],"h","idx","pv"]],["set","idx","p"]],["set","done",1]],0],0],0]],0]],["set","h",["tapp","std.heap._set",["t","A"],"h","idx","v"]],"h"],"kind":"defn","name":"std.heap.push","params":[{"name":"h","ty":"bytes"},{"name":"x","ty":["t","A"]}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]},{"body":["begin",["let","cap2",["if",["<","cap",1],1,"cap"]],["let","esz",["ty.size_bytes",["t","A"]]],["let","b",["bytes.alloc",["+",8,["*","cap2","esz"]]]],["set","b",["std.u32.write_le_at","b",0,"cap2"]],["set","b",["std.u32.write_le_at","b",4,0]],"b"],"kind":"defn","name":"std.heap.with_capacity","params":[{"name":"cap","ty":"i32"}],"result":"bytes","type_params":[{"bound":"orderable","name":"A"}]}],"imports":["std.u32"],"kind":"module","module_id":"std.heap","schema_version":"x07.x07ast@0.4.0"}
