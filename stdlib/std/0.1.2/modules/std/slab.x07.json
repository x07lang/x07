{"decls":[{"kind":"export","names":["std.slab.alloc","std.slab.alloc_u32","std.slab.cap","std.slab.cap_u32","std.slab.free","std.slab.free_head","std.slab.free_head_u32","std.slab.free_u32","std.slab.get_or","std.slab.get_u32","std.slab.len","std.slab.len_u32","std.slab.new","std.slab.new_u32","std.slab.set","std.slab.set_u32"]},{"body":["begin",["let","cap",["std.slab.cap","slab"]],["if",["<u",0,"h"],["if",["<u","cap","h"],0,1],0]],"kind":"defn","name":"std.slab._check_handle","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":12,"kind":"defn","name":"std.slab._next_base","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",["std.slab._slot_off",["std.slab._next_base","slab"],"h"]],"kind":"defn","name":"std.slab._next_get","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":["begin",["let","base",["std.slab._next_base","slab"]],["let","off",["std.slab._slot_off","base","h"]],["std.u32.write_le_at","slab","off","v"]],"kind":"defn","name":"std.slab._next_set","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"},{"body":["+","base",["*",["-","h",1],4]],"kind":"defn","name":"std.slab._slot_off","params":[{"name":"base","ty":"i32"},{"name":"h","ty":"i32"}],"result":"i32"},{"body":["ty.read_le_at",["t","V"],"slab",["tapp","std.slab._val_off",["t","V"],"slab","h"]],"kind":"defn","name":"std.slab._val_get","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":["t","V"],"type_params":[{"bound":"num_like","name":"V"}]},{"body":["+",["std.slab._vals_base","slab"],["*",["-","h",1],["ty.size_bytes",["t","V"]]]],"kind":"defn","name":"std.slab._val_off","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"}],"result":"i32","type_params":[{"bound":"num_like","name":"V"}]},{"body":["begin",["let","off",["tapp","std.slab._val_off",["t","V"],"slab","h"]],["ty.write_le_at",["t","V"],"slab","off","v"]],"kind":"defn","name":"std.slab._val_set","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":["t","V"]}],"result":"bytes","type_params":[{"bound":"num_like","name":"V"}]},{"body":["+",12,["*",["std.slab.cap","slab"],4]],"kind":"defn","name":"std.slab._vals_base","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","cap",["std.slab.cap","slab"]],["if",["=","cap",0],["return","slab"],0],["let","head",["std.slab.free_head","slab"]],["if",["=","head",0],["return","slab"],0],["let","next",["std.slab._next_get","slab","head"]],["let","len",["+",["std.slab.len","slab"],1]],["set","slab",["std.u32.write_le_at","slab",8,"next"]],["set","slab",["std.slab._next_set","slab","head",-1]],["set","slab",["std.u32.write_le_at","slab",4,"len"]],"slab"],"kind":"defn","name":"std.slab.alloc","params":[{"name":"slab","ty":"bytes"}],"result":"bytes"},{"body":["std.slab.alloc","slab"],"kind":"defn","name":"std.slab.alloc_u32","params":[{"name":"slab","ty":"bytes"}],"result":"bytes"},{"body":["std.u32.read_le_at","slab",0],"kind":"defn","name":"std.slab.cap","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.slab.cap","slab"],"kind":"defn","name":"std.slab.cap_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["=",["std.slab._check_handle","slab","h"],0],["return","slab"],0],["if",["=",["std.slab._next_get","slab","h"],-1],0,["return","slab"]],["let","head",["std.slab.free_head","slab"]],["let","len",["-",["std.slab.len","slab"],1]],["set","slab",["std.slab._next_set","slab","h","head"]],["set","slab",["std.u32.write_le_at","slab",8,"h"]],["set","slab",["std.u32.write_le_at","slab",4,"len"]],"slab"],"kind":"defn","name":"std.slab.free","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"}],"result":"bytes"},{"body":["std.u32.read_le_at","slab",8],"kind":"defn","name":"std.slab.free_head","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.slab.free_head","slab"],"kind":"defn","name":"std.slab.free_head_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.slab.free","slab","h"],"kind":"defn","name":"std.slab.free_u32","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"}],"result":"bytes"},{"body":["if",["if",["=",["std.slab._check_handle","slab","h"],1],["=",["std.slab._next_get","slab","h"],-1],0],["tapp","std.slab._val_get",["t","V"],"slab","h"],"default"],"kind":"defn","name":"std.slab.get_or","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"},{"name":"default","ty":["t","V"]}],"result":["t","V"],"type_params":[{"bound":"num_like","name":"V"}]},{"body":["tapp","std.slab.get_or","u32","slab","h","default"],"kind":"defn","name":"std.slab.get_u32","params":[{"name":"slab","ty":"bytes_view"},{"name":"h","ty":"i32"},{"name":"default","ty":"i32"}],"result":"i32"},{"body":["std.u32.read_le_at","slab",4],"kind":"defn","name":"std.slab.len","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["std.slab.len","slab"],"kind":"defn","name":"std.slab.len_u32","params":[{"name":"slab","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","cap2",["if",["<","cap",0],0,"cap"]],["let","vsz",["ty.size_bytes",["t","V"]]],["let","out",["bytes.alloc",["+",12,["+",["*","cap2",4],["*","cap2","vsz"]]]]],["set","out",["std.u32.write_le_at","out",0,"cap2"]],["set","out",["std.u32.write_le_at","out",4,0]],["set","out",["std.u32.write_le_at","out",8,["if",["=","cap2",0],0,1]]],["let","vals_base",["+",12,["*","cap2",4]]],["for","i",0,"cap2",["begin",["let","h",["+","i",1]],["let","next",["if",["=","h","cap2"],0,["+","h",1]]],["set","out",["std.u32.write_le_at","out",["+",12,["*","i",4]],"next"]],["set","out",["ty.write_le_at",["t","V"],"out",["+","vals_base",["*","i","vsz"]],0]],0]],"out"],"kind":"defn","name":"std.slab.new","params":[{"name":"cap","ty":"i32"}],"result":"bytes","type_params":[{"bound":"num_like","name":"V"}]},{"body":["tapp","std.slab.new","u32","cap"],"kind":"defn","name":"std.slab.new_u32","params":[{"name":"cap","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["if",["=",["std.slab._check_handle","slab","h"],1],["=",["std.slab._next_get","slab","h"],-1],0],0,["return","slab"]],["tapp","std.slab._val_set",["t","V"],"slab","h","v"]],"kind":"defn","name":"std.slab.set","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":["t","V"]}],"result":"bytes","type_params":[{"bound":"num_like","name":"V"}]},{"body":["tapp","std.slab.set","u32","slab","h","v"],"kind":"defn","name":"std.slab.set_u32","params":[{"name":"slab","ty":"bytes"},{"name":"h","ty":"i32"},{"name":"v","ty":"i32"}],"result":"bytes"}],"imports":["std.u32"],"kind":"module","module_id":"std.slab","schema_version":"x07.x07ast@0.4.0"}
