{"decls":[{"kind":"export","names":["std.http.envelope.extract_body_base64_canon_or_err_v1","std.http.envelope.extract_body_text_canon_or_err_v1","std.http.envelope.extract_id_canon_or_err_v1","std.http.envelope.extract_method_canon_or_err_v1","std.http.envelope.extract_path_canon_or_err_v1","std.http.envelope.extract_query_canon_or_err_v1","std.http.envelope.response_base64_canon_v1","std.http.envelope.response_text_canon_v1"]},{"body":["begin",["let","qv",["std.vec.with_capacity",["+",["view.len","json"],["+",["view.len","field"],8]]]],["set","qv",["std.vec.extend_bytes","qv","json"]],["set","qv",["std.vec.push","qv",0]],["set","qv",["std.vec.extend_bytes","qv","field"]],["let","query",["std.vec.as_bytes","qv"]],["std.json.extract_path_canon_or_err",["bytes.view","query"]]],"kind":"defn","name":"std.http.envelope._extract_field_canon_or_err_v1","params":[{"name":"json","ty":"bytes_view"},{"name":"field","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","body.base64"]],"kind":"defn","name":"std.http.envelope.extract_body_base64_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","body.text"]],"kind":"defn","name":"std.http.envelope.extract_body_text_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","id"]],"kind":"defn","name":"std.http.envelope.extract_id_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","method"]],"kind":"defn","name":"std.http.envelope.extract_method_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","path"]],"kind":"defn","name":"std.http.envelope.extract_path_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["std.http.envelope._extract_field_canon_or_err_v1","req",["bytes.view_lit","query"]],"kind":"defn","name":"std.http.envelope.extract_query_canon_or_err_v1","params":[{"name":"req","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","status_b",["std.fmt.u32_to_dec","status"]],["let","len_b",["std.fmt.u32_to_dec","body_bytes_len"]],["let","v",["std.vec.with_capacity",512]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit","{\"schema_version\":\"x07.http.response.envelope@0.1.0\",\"request_id\":"]]],["set","v",["std.vec.extend_bytes","v","request_id_canon"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"status\":"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view","status_b"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"headers\":"]]],["set","v",["std.vec.extend_bytes","v","headers_json"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"body\":{\"bytes_len\":"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view","len_b"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"base64\":"]]],["set","v",["std.vec.extend_bytes","v","body_base64_canon"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit","}}\n"]]],["std.vec.as_bytes","v"]],"kind":"defn","name":"std.http.envelope.response_base64_canon_v1","params":[{"name":"request_id_canon","ty":"bytes_view"},{"name":"status","ty":"i32"},{"name":"headers_json","ty":"bytes_view"},{"name":"body_bytes_len","ty":"i32"},{"name":"body_base64_canon","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","status_b",["std.fmt.u32_to_dec","status"]],["let","len_b",["std.fmt.u32_to_dec","body_bytes_len"]],["let","v",["std.vec.with_capacity",512]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit","{\"schema_version\":\"x07.http.response.envelope@0.1.0\",\"request_id\":"]]],["set","v",["std.vec.extend_bytes","v","request_id_canon"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"status\":"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view","status_b"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"headers\":"]]],["set","v",["std.vec.extend_bytes","v","headers_json"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"body\":{\"bytes_len\":"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view","len_b"]]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit",",\"text\":"]]],["set","v",["std.vec.extend_bytes","v","body_text_canon"]],["set","v",["std.vec.extend_bytes","v",["bytes.view_lit","}}\n"]]],["std.vec.as_bytes","v"]],"kind":"defn","name":"std.http.envelope.response_text_canon_v1","params":[{"name":"request_id_canon","ty":"bytes_view"},{"name":"status","ty":"i32"},{"name":"headers_json","ty":"bytes_view"},{"name":"body_bytes_len","ty":"i32"},{"name":"body_text_canon","ty":"bytes_view"}],"result":"bytes"}],"imports":["std.fmt","std.json","std.vec"],"kind":"module","module_id":"std.http.envelope","schema_version":"x07.x07ast@0.3.0"}
