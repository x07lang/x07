{"decls":[{"kind":"export","names":["std.set.unique_lines_sorted"]},{"body":["begin",["let","end2","end"],["if",["if",["<u","start","end2"],["=",["bytes.get_u8","b",["-","end2",1]],13],0],["set","end2",["-","end2",1]],0],["let","l",["std.set._trim_start_space_tab","b","start","end2"]],["let","r",["std.set._trim_end_space_tab","b","l","end2"]],["if",["<u","l","r"],["std.set._insert_sorted","set",["bytes.slice","b","l",["-","r","l"]]],"set"]],"kind":"defn","name":"std.set._insert_line_from_range","params":[{"name":"b","ty":"bytes"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"},{"name":"set","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","key_len",["bytes.len","key"]],["let","total",["bytes.len","set"]],["let","out",["vec_u8.with_capacity",["+","total",["+",4,"key_len"]]]],["let","inserted",0],["let","off",0],["for","_",0,["+","total",1],["begin",["if",[">=u","off","total"],["begin",["if",["=","inserted",0],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","key_len"]],["vec_u8.extend_bytes","out","key"],["set","inserted",1]],0],["return",["vec_u8.as_bytes","out"]]],0],["let","entry_len",["codec.read_u32_le","set","off"]],["let","entry_start",["+","off",4]],["let","entry",["bytes.slice","set","entry_start","entry_len"]],["if",["=","inserted",0],["begin",["let","cmp",["std.slice.cmp_bytes","key","entry"]],["if",["=","cmp",0],["return","set"],["if",["<","cmp",0],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","key_len"]],["vec_u8.extend_bytes","out","key"],["set","inserted",1]],0]]],0],["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_len"]],["vec_u8.extend_bytes","out","entry"],["set","off",["+","entry_start","entry_len"]],0]],"set"],"kind":"defn","name":"std.set._insert_sorted","params":[{"name":"set","ty":"bytes"},{"name":"key","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","total",["bytes.len","set"]],["let","out",["vec_u8.with_capacity","total"]],["let","off",0],["for","_",0,["+","total",1],["begin",["if",[">=u","off","total"],["return",["vec_u8.as_bytes","out"]],0],["let","entry_len",["codec.read_u32_le","set","off"]],["let","entry_start",["+","off",4]],["let","entry",["bytes.slice","set","entry_start","entry_len"]],["if",["<u",0,["vec_u8.len","out"]],["vec_u8.push","out",10],0],["vec_u8.extend_bytes","out","entry"],["set","off",["+","entry_start","entry_len"]],0]],["vec_u8.as_bytes","out"]],"kind":"defn","name":"std.set._join_lines","params":[{"name":"set","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","last",["-","start",1]],["for","i","start","end",["begin",["let","c",["bytes.get_u8","b","i"]],["if",["std.text.ascii.is_space_tab","c"],0,["set","last","i"]]]],["+","last",1]],"kind":"defn","name":"std.set._trim_end_space_tab","params":[{"name":"b","ty":"bytes"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["for","i","start","end",["begin",["let","c",["bytes.get_u8","b","i"]],["if",["std.text.ascii.is_space_tab","c"],0,["return","i"]]]],"end"],"kind":"defn","name":"std.set._trim_start_space_tab","params":[{"name":"b","ty":"bytes"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["bytes.len","b"]],["let","set",["bytes.alloc",0]],["let","line_start",0],["for","i",0,"n",["begin",["if",["=",["bytes.get_u8","b","i"],10],["begin",["set","set",["std.set._insert_line_from_range","b","line_start","i","set"]],["set","line_start",["+","i",1]]],0],0]],["set","set",["std.set._insert_line_from_range","b","line_start","n","set"]],["std.set._join_lines","set"]],"kind":"defn","name":"std.set.unique_lines_sorted","params":[{"name":"b","ty":"bytes"}],"result":"bytes"}],"imports":["std.slice","std.text.ascii"],"kind":"module","module_id":"std.set","schema_version":"x07.x07ast@0.3.0"}
