{"decls":[{"kind":"export","names":["std.map.word_freq_sorted_ascii"]},{"body":["begin",["let","key_len",["bytes.len","key"]],["let","total",["bytes.len","map"]],["let","out",["vec_u8.with_capacity",["+","total",["+",8,"key_len"]]]],["let","inserted",0],["let","off",0],["for","_",0,["+","total",1],["begin",["if",[">=u","off","total"],["begin",["if",["=","inserted",0],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","key_len"]],["vec_u8.extend_bytes","out","key"],["vec_u8.extend_bytes","out",["codec.write_u32_le",1]],["set","inserted",1]],0],["return",["vec_u8.as_bytes","out"]]],0],["let","entry_key_len",["codec.read_u32_le","map","off"]],["let","entry_key_start",["+","off",4]],["let","entry_key",["bytes.slice","map","entry_key_start","entry_key_len"]],["let","entry_count_off",["+","entry_key_start","entry_key_len"]],["let","entry_count",["codec.read_u32_le","map","entry_count_off"]],["let","entry_next",["+","entry_count_off",4]],["if",["=","inserted",0],["begin",["let","cmp",["std.slice.cmp_bytes","key","entry_key"]],["if",["=","cmp",0],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_key_len"]],["vec_u8.extend_bytes","out","entry_key"],["vec_u8.extend_bytes","out",["codec.write_u32_le",["+","entry_count",1]]],["set","inserted",1]],["if",["<","cmp",0],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","key_len"]],["vec_u8.extend_bytes","out","key"],["vec_u8.extend_bytes","out",["codec.write_u32_le",1]],["set","inserted",1],["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_key_len"]],["vec_u8.extend_bytes","out","entry_key"],["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_count"]]],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_key_len"]],["vec_u8.extend_bytes","out","entry_key"],["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_count"]]]]]],["begin",["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_key_len"]],["vec_u8.extend_bytes","out","entry_key"],["vec_u8.extend_bytes","out",["codec.write_u32_le","entry_count"]]]],["set","off","entry_next"],0]],"map"],"kind":"defn","name":"std.map._insert_or_inc1_u32","params":[{"name":"map","ty":"bytes"},{"name":"key","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","total",["bytes.len","map"]],["let","out",["vec_u8.with_capacity","total"]],["let","off",0],["for","_",0,["+","total",1],["begin",["if",[">=u","off","total"],["return",["vec_u8.as_bytes","out"]],0],["let","key_len",["codec.read_u32_le","map","off"]],["let","key_start",["+","off",4]],["let","key",["bytes.slice","map","key_start","key_len"]],["let","count_off",["+","key_start","key_len"]],["let","count",["codec.read_u32_le","map","count_off"]],["let","next",["+","count_off",4]],["if",["<u",0,["vec_u8.len","out"]],["vec_u8.push","out",10],0],["vec_u8.extend_bytes","out","key"],["vec_u8.push","out",61],["vec_u8.extend_bytes","out",["fmt.u32_to_dec","count"]],["set","off","next"],0]],["vec_u8.as_bytes","out"]],"kind":"defn","name":"std.map._to_word_freq_lines","params":[{"name":"map","ty":"bytes"}],"result":"bytes"},{"body":["begin",["let","n",["bytes.len","b"]],["let","map",["bytes.alloc",0]],["let","in_word",0],["let","word",["vec_u8.with_capacity",0]],["for","i",0,"n",["begin",["let","c",["bytes.get_u8","b","i"]],["if",["std.text.ascii.is_alpha","c"],["begin",["if",["=","in_word",0],["begin",["set","word",["vec_u8.with_capacity",8]],["set","in_word",1]],0],["vec_u8.push","word",["std.text.ascii.to_lower_u8","c"]]],["if",["=","in_word",1],["begin",["set","map",["std.map._insert_or_inc1_u32","map",["vec_u8.as_bytes","word"]]],["set","in_word",0]],0]],0]],["if",["=","in_word",1],["begin",["set","map",["std.map._insert_or_inc1_u32","map",["vec_u8.as_bytes","word"]]],0],0],["std.map._to_word_freq_lines","map"]],"kind":"defn","name":"std.map.word_freq_sorted_ascii","params":[{"name":"b","ty":"bytes"}],"result":"bytes"}],"imports":["std.slice","std.text.ascii"],"kind":"module","module_id":"std.map","schema_version":"x07.x07ast@0.1.0"}
