{"decls":[{"body":["begin",["let","out",["bytes.alloc","len"]],["for","i",0,"len",["begin",["let","c",["bytes.get_u8","input",["+","off","i"]]],["if",["if",[">=u","c",97],["<u","c",123],0],["set","c",["-","c",32]],0],["set","out",["bytes.set_u8","out","i","c"]],0]],"out"],"kind":"defasync","name":"main.upper_chunk","params":[{"name":"off","ty":"i32"},{"name":"len","ty":"i32"}],"result":"bytes"}],"imports":[],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.2.0","solve":["begin",["let","n",["bytes.len","input"]],["if",["=","n",0],["bytes.empty"],["begin",["let","workers",4],["let","handles",["vec_u8.with_capacity",["*","workers",4]]],["for","w",0,"workers",["begin",["let","start",["/",["*","n","w"],"workers"]],["let","end",["/",["*","n",["+","w",1]],"workers"]],["let","len",["-","end","start"]],["let","h",["main.upper_chunk","start","len"]],["task.spawn","h"],["set","handles",["vec_u8.extend_bytes","handles",["codec.write_u32_le","h"]]],0]],["let","hbytes",["vec_u8.into_bytes","handles"]],["let","out",["bytes.alloc","n"]],["for","w",0,"workers",["begin",["let","start",["/",["*","n","w"],"workers"]],["let","end",["/",["*","n",["+","w",1]],"workers"]],["let","len",["-","end","start"]],["let","h",["codec.read_u32_le","hbytes",["*","w",4]]],["let","b",["await","h"]],["for","j",0,"len",["begin",["set","out",["bytes.set_u8","out",["+","start","j"],["bytes.get_u8","b","j"]]],0]],0]],"out"]]]}
