diff --git a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/src/main.x07.json b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/src/main.x07.json
index 2f1696e..dda909c 100644
--- a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/src/main.x07.json
+++ b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/src/main.x07.json
@@ -1,2 +1 @@
 {"decls":[],"imports":["app"],"kind":"entry","module_id":"main","schema_version":"x07.x07ast@0.3.0","solve":["app.solve","input"]}
-
diff --git a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/x07.json b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/x07.json
index f4ea51e..ef402bb 100644
--- a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/x07.json
+++ b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/x07.json
@@ -1,13 +1,27 @@
 {
-  "schema_version": "x07.project@0.2.0",
-  "world": "solve-pure",
+  "default_profile": "test",
+  "dependencies": [
+    {
+      "name": "ext-compress-rs",
+      "path": ".x07/deps/ext-compress-rs/0.1.5",
+      "version": "0.1.5"
+    },
+    {
+      "name": "ext-error",
+      "path": ".x07/deps/ext-error/0.1.4",
+      "version": "0.1.4"
+    }
+  ],
   "entry": "src/main.x07.json",
-  "module_roots": ["src"],
-  "dependencies": [],
   "lockfile": "x07.lock.json",
-  "default_profile": "test",
+  "module_roots": [
+    "src"
+  ],
   "profiles": {
-    "test": { "world": "solve-pure" }
-  }
+    "test": {
+      "world": "solve-pure"
+    }
+  },
+  "schema_version": "x07.project@0.2.0",
+  "world": "solve-pure"
 }
-
diff --git a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/x07.lock.json b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/x07.lock.json
index 2925fc0..9e25ee1 100644
--- a/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/broken/x07.lock.json
+++ b/ci/fixtures/agent-scenarios/compress-zstd/missing-dep/expected/x07.lock.json
@@ -1,4 +1,35 @@
 {
   "schema_version": "x07.lock@0.3.0",
-  "dependencies": []
+  "dependencies": [
+    {
+      "name": "ext-compress-rs",
+      "version": "0.1.5",
+      "path": ".x07/deps/ext-compress-rs/0.1.5",
+      "package_manifest_sha256": "a63d87e0d2c6056c0a8f9a60fdafa315d525d412232a6ba26d661edf5e54e265",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.compress": "950cfa2ca211a5070b15b9e65240c5e666a28c1c9efefd17d01ff077d084b88e",
+        "ext.compress.tests": "7398ebc819e8080045f67bd37446d324c4f097ed82e93ec37641a24606c861fc",
+        "ext.zip": "1ecd51bbf80b9e43a4c7fa7d1bdfa6d26397a27a0a6aee2d237a3e0e90f50671",
+        "ext.zip.tests": "bd96f3212022e41840a43dfddbcd3560b76f5a87ec3be6098a69ca5b38952c8b",
+        "ext.zstd": "1e289c31b5a407d6c5fea3c4d5e5cff7d6f59ff185392ba327bc38a08dedb519",
+        "ext.zstd.tests": "160c77242dc967387c3251cb2467df0fa2d876e5c3577c1922805b1d109965c1"
+      },
+      "yanked": false
+    },
+    {
+      "name": "ext-error",
+      "version": "0.1.4",
+      "path": ".x07/deps/ext-error/0.1.4",
+      "package_manifest_sha256": "2583aae477f906bf67bd815972b333760588c54d7a1776831be85f1956bfc01e",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.error.chain": "082d051b9eab7ffba7ab42f20ef6afdbe68389b9060d2fe876575d8fb9f1b76a",
+        "ext.error.context": "3eac73db10c689e7a1e2c944301aadead445e164c3b24c381445fbedac9c5400",
+        "ext.error.fmt": "ac94ff7ff9e4dae4b2a1739848addbb7e0aa87f25e3e73b80d5c6b822eb48c12",
+        "ext.error.tests": "94903cfffa1f37dd22c1e5c2cc063d56ec6030b92a704e3bf247b7e1367cc906"
+      },
+      "yanked": false
+    }
+  ]
 }
