diff --git a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.json b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.json
index f4ea51e..b862caf 100644
--- a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.json
+++ b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.json
@@ -1,13 +1,42 @@
 {
-  "schema_version": "x07.project@0.2.0",
-  "world": "solve-pure",
+  "default_profile": "test",
+  "dependencies": [
+    {
+      "name": "ext-bigint-rs",
+      "path": ".x07/deps/ext-bigint-rs/0.1.0",
+      "version": "0.1.0"
+    },
+    {
+      "name": "ext-cbor-rs",
+      "path": ".x07/deps/ext-cbor-rs/0.1.0",
+      "version": "0.1.0"
+    },
+    {
+      "name": "ext-data-model",
+      "path": ".x07/deps/ext-data-model/0.1.2",
+      "version": "0.1.2"
+    },
+    {
+      "name": "ext-decimal-rs",
+      "path": ".x07/deps/ext-decimal-rs/0.1.0",
+      "version": "0.1.0"
+    },
+    {
+      "name": "ext-error",
+      "path": ".x07/deps/ext-error/0.1.2",
+      "version": "0.1.2"
+    }
+  ],
   "entry": "src/main.x07.json",
-  "module_roots": ["src"],
-  "dependencies": [],
   "lockfile": "x07.lock.json",
-  "default_profile": "test",
+  "module_roots": [
+    "src"
+  ],
   "profiles": {
-    "test": { "world": "solve-pure" }
-  }
+    "test": {
+      "world": "solve-pure"
+    }
+  },
+  "schema_version": "x07.project@0.2.0",
+  "world": "solve-pure"
 }
-
diff --git a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.lock.json b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.lock.json
index 52ca7bf..7e30a95 100644
--- a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.lock.json
+++ b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.lock.json
@@ -1,5 +1,75 @@
 {
   "schema_version": "x07.lock@0.2.0",
-  "dependencies": []
+  "dependencies": [
+    {
+      "name": "ext-bigint-rs",
+      "version": "0.1.0",
+      "path": ".x07/deps/ext-bigint-rs/0.1.0",
+      "package_manifest_sha256": "c535707f5fd4296005f848cdde77369a1fd0ee66eaf1a5611b4c65049e59531c",
+      "module_root": "modules",
+      "modules_sha256": {
+        "std.math.bigint": "bc486e33e7a1c412c40196b920a6b42d1786401d3118a28035c562e170498655",
+        "std.math.bigint.codec_v1": "0ac88130b51e73fdc52f486cf55c9416d5688cacb6602a2c3d2845a3cd51d2e5",
+        "std.math.bigint.fmt": "a1c4d5a6b89a2d30eda1d52b0082d4e29399282c614c35eceed4b35d2ab2fbce",
+        "std.math.bigint.parse": "19abfae81e4e1c73ca90946b4f10efee987db896e7c96677a9557884004de2d1",
+        "std.math.bigint.tests": "61b589cc730489023bede49dd0746280c82eeb7f309a0d1314dd47b1f2f002d1"
+      }
+    },
+    {
+      "name": "ext-cbor-rs",
+      "version": "0.1.0",
+      "path": ".x07/deps/ext-cbor-rs/0.1.0",
+      "package_manifest_sha256": "0ea50d60a96cb2746743a628014f0783097f8f957022ce07e49b4d8faca52af5",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.cbor": "27ddc995fd07bfa14ba6c32c9b662d4127d0e2210949c16a300941d046ebdb77",
+        "ext.cbor.data_model": "ea7cd130374f4a8e8da558561879967bc9cf1c75e2f406aca573b32cf5af8b02",
+        "ext.cbor.tests": "4311da8c67b40a1fcf50ff898a7fcd462b75cb37bccd5e7ee7c28b4ee011b869"
+      }
+    },
+    {
+      "name": "ext-data-model",
+      "version": "0.1.2",
+      "path": ".x07/deps/ext-data-model/0.1.2",
+      "package_manifest_sha256": "e44b9b6ddcc7e758536a65d721e8ddbfc6c424c92ed35eea09757707bc7d4a78",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.data_model": "62ab24c6aa3ff6277ffaebb4574537f7ccc96c164426b8cf85ec9abecf029c05",
+        "ext.data_model.json": "f695f4758365743e01d4e98543bc640e0e83dfbac8f67980f0834ee4d8c89f41",
+        "ext.data_model.json.tests": "ab56828796f458070e66b10511b1c1f786d4cf7c7f4cf5e475781144e0a694f5",
+        "ext.data_model.tests": "fa3fe4df0791826aa5f5afdb7aef47e6f07846643f0ec9d225b6ee56fb5d4ae7",
+        "ext.data_model.toml": "13af7f2d210e4b15b9823cb1ba5a2a4fe28ae04c7002d736c61aa8a1de3ed485",
+        "ext.data_model.toml.tests": "eb9fd4b78485ed91b824e2f6fb68a83069f7cd8524225cc9e3caa91224fe4b81",
+        "ext.data_model.yaml": "668b8004ace4f02dafeeb95410808cdc68d7c98d61f7a99cd0886094d99cf0e7",
+        "ext.data_model.yaml.tests": "913dc8e5c6d87f50d55bb652ed90cc4d0f451521b3e1b4c03a9b42a993b4727e"
+      }
+    },
+    {
+      "name": "ext-decimal-rs",
+      "version": "0.1.0",
+      "path": ".x07/deps/ext-decimal-rs/0.1.0",
+      "package_manifest_sha256": "e22b76572e96312298884762c2901a34b5d01723f4c85dbeb9642e3bc5e65cb1",
+      "module_root": "modules",
+      "modules_sha256": {
+        "std.math.decimal": "4ffaeec89e1445676cb24594a91ea476142368ba37237a5e519b320c1d619aca",
+        "std.math.decimal.codec_v1": "98de8a76cc059495cdacf68536e980051aef7b49c902a3ea86b0841051747e53",
+        "std.math.decimal.fmt": "2bcb1a443ce7f9f50b358fa6a7d45a3f702d42383e36213eb33deb92e5c1ed24",
+        "std.math.decimal.parse": "2e6b188c2e4476a0aca86ab2d59e26051ffdaa1f7017a3823142b2f13a26e08b",
+        "std.math.decimal.tests": "d1477c30b782a2e163a1c97f42ccd58f68b49fffcb09b16a2da708c01dc4be56"
+      }
+    },
+    {
+      "name": "ext-error",
+      "version": "0.1.2",
+      "path": ".x07/deps/ext-error/0.1.2",
+      "package_manifest_sha256": "34d6ed661c267e550bea1af6688799341e0a5f557189633fd12665e21993fdae",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.error.chain": "35193a5265840747ef52bc8c386dc7b1d44abc780504ad0f2c3a857183a8aa67",
+        "ext.error.context": "95161e94aa65f48b4bc41eb26490108543b76f77148510191fa6f3c85627a7ac",
+        "ext.error.fmt": "a9487a51312f93764103f52e8297e5398f315ed572f8b105dd6329d0ee8465dc",
+        "ext.error.tests": "ba8fdb32cb7e6a87c867817f80c4be7a28226ca0bec66047c7177ebf687282d8"
+      }
+    }
+  ]
 }
-
