diff --git a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.json b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.json
index f4ea51e..212532c 100644
--- a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.json
+++ b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.json
@@ -1,13 +1,42 @@
 {
-  "schema_version": "x07.project@0.2.0",
-  "world": "solve-pure",
+  "default_profile": "test",
+  "dependencies": [
+    {
+      "name": "ext-bigint-rs",
+      "path": ".x07/deps/ext-bigint-rs/0.1.1",
+      "version": "0.1.1"
+    },
+    {
+      "name": "ext-cbor-rs",
+      "path": ".x07/deps/ext-cbor-rs/0.1.1",
+      "version": "0.1.1"
+    },
+    {
+      "name": "ext-data-model",
+      "path": ".x07/deps/ext-data-model/0.1.3",
+      "version": "0.1.3"
+    },
+    {
+      "name": "ext-decimal-rs",
+      "path": ".x07/deps/ext-decimal-rs/0.1.1",
+      "version": "0.1.1"
+    },
+    {
+      "name": "ext-error",
+      "path": ".x07/deps/ext-error/0.1.3",
+      "version": "0.1.3"
+    }
+  ],
   "entry": "src/main.x07.json",
-  "module_roots": ["src"],
-  "dependencies": [],
   "lockfile": "x07.lock.json",
-  "default_profile": "test",
+  "module_roots": [
+    "src"
+  ],
   "profiles": {
-    "test": { "world": "solve-pure" }
-  }
+    "test": {
+      "world": "solve-pure"
+    }
+  },
+  "schema_version": "x07.project@0.2.0",
+  "world": "solve-pure"
 }
-
diff --git a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.lock.json b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.lock.json
index d7f8feb..b4ca963 100644
--- a/ci/fixtures/agent-scenarios/data-cbor/missing-dep/broken/x07.lock.json
+++ b/ci/fixtures/agent-scenarios/data-cbor/missing-dep/expected/x07.lock.json
@@ -1,4 +1,75 @@
 {
   "schema_version": "x07.lock@0.3.0",
-  "dependencies": []
+  "dependencies": [
+    {
+      "name": "ext-bigint-rs",
+      "version": "0.1.1",
+      "path": ".x07/deps/ext-bigint-rs/0.1.1",
+      "package_manifest_sha256": "f4d9d77838337bba7ccab4996ab05c59d5a18cfc4ef7abca2904e0d41a7473cb",
+      "module_root": "modules",
+      "modules_sha256": {
+        "std.math.bigint": "efb22181fad0445d366dc619718eeff120a5202d377c918a5021c55298f4762a",
+        "std.math.bigint.codec_v1": "3978a37df1089902a65a5ae0c03a6b852e92677793458f46a48052cdd1865ace",
+        "std.math.bigint.fmt": "fe5fef0d29040d22fd36461ac38a3805c8bce7e5de35fa46a2e88c40464b42c9",
+        "std.math.bigint.parse": "6dd4f647fbdeb3160783e149ed75305c83d47d31a449428e65c683a6ce92140a",
+        "std.math.bigint.tests": "af4b72f1346c35d3ef125ede0609ae205a7b2ebf2388666855c026ecb58c45a1"
+      }
+    },
+    {
+      "name": "ext-cbor-rs",
+      "version": "0.1.1",
+      "path": ".x07/deps/ext-cbor-rs/0.1.1",
+      "package_manifest_sha256": "31e068b476abb49e336e3b6df40be0d2c3b3cbcc1a1bbc16163cacd810ca9673",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.cbor": "8e2bc2cd416c3ae23acb683e45f5587e59e9cfc8efd0f3983897c211cd849673",
+        "ext.cbor.data_model": "b42618962d7b249e68f81d687b328fb0e9e19287ab48cd7435f0ec7c417af44b",
+        "ext.cbor.tests": "0df93a8a0923db2131d3ab5960f8ee49e9b61aab9f1ae92fc94cd2cfb57d860d"
+      }
+    },
+    {
+      "name": "ext-data-model",
+      "version": "0.1.3",
+      "path": ".x07/deps/ext-data-model/0.1.3",
+      "package_manifest_sha256": "5bf0da4f80aab0f47a323d304960bc4eafa94509f896590d391029e011ef2f29",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.data_model": "5917366961cdf8e9f00ce6a6ecdaf2243d0f48f7728a0d3ebf177a6ea7bac6cc",
+        "ext.data_model.json": "2f29a7d945961c59c64567304d98a945d663c2bbcbb096a2a8d4052835585fa1",
+        "ext.data_model.json.tests": "ce9de7eb5713df3e027f29eae8b1411c8c62499084a1d4ca5e9393d236e7fa72",
+        "ext.data_model.tests": "cc477b6f2e4cc08cd919b52070ec99812ef864a603dd17bfd416bbd4e6e47a63",
+        "ext.data_model.toml": "5c75cf8f725a32cffa6e9c903d6034a224e9fb0d53fa6ddce9242e0d7867aa9e",
+        "ext.data_model.toml.tests": "ee02e87ced10d869c5be944b1de3ed906ad84a17e75b6f17454e2fd0a9b0528e",
+        "ext.data_model.yaml": "81baa7a5657961053a8e561bf889f37e421984c5ceaa83d0f8e5909a365ed516",
+        "ext.data_model.yaml.tests": "91e1b0993974d03daa911b74f48b7a497a4898f80230f6f432aa645b633ddd14"
+      }
+    },
+    {
+      "name": "ext-decimal-rs",
+      "version": "0.1.1",
+      "path": ".x07/deps/ext-decimal-rs/0.1.1",
+      "package_manifest_sha256": "a2e483db819730e0237edb161425572f3ae2a157ad519b49c8de403a2b95f0a0",
+      "module_root": "modules",
+      "modules_sha256": {
+        "std.math.decimal": "3555d5ca574433474e8053d68eb0cad6ffbaef3267b32ce0fb034ff3a9de32e1",
+        "std.math.decimal.codec_v1": "7695a7dc0110f84bfe0b47ef93d728596e2542a2d8598e51555016c8e95e2baa",
+        "std.math.decimal.fmt": "91550f79ea71d5efb998a101bbe1923a7135e1f872e710dae8f876c1092e3943",
+        "std.math.decimal.parse": "dd1a74a50da6cdfb6cfe7cf1ce510a495a2e8befab96fc53099b6378a33fd341",
+        "std.math.decimal.tests": "c0b61d6c0950953f88ba37078c13edcca98bdf394b4a537b6f339b91c0c06ed8"
+      }
+    },
+    {
+      "name": "ext-error",
+      "version": "0.1.3",
+      "path": ".x07/deps/ext-error/0.1.3",
+      "package_manifest_sha256": "723a31c95753dd8c096ad51d3a073f14c56d7915884aa4742ca1229f15e77e88",
+      "module_root": "modules",
+      "modules_sha256": {
+        "ext.error.chain": "c030554da4403f7f68612cea7ec235edd076c9570eac0a64e9800c4352f98c7f",
+        "ext.error.context": "10c3939f6635e851a87db46ad1dcb4cceb205e4a861c4e23c1e17e1af1c7fbf0",
+        "ext.error.fmt": "48cfcf0b1ee0f977fd30a4c3626e5979633d4d8142ae2a040a01b40f566ba455",
+        "ext.error.tests": "49fb5e57aab0fda9d7a19cb61f3cf1b0add2e7e451a6f3411d7f28d844d53586"
+      }
+    }
+  ]
 }
